2025-05-10 07:00:45.581 +07:00 [INF] Executed DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[username], [u].[avatar_url]
FROM [Users] AS [u]
2025-05-10 07:00:52.487 +07:00 [INF] User profile is available. Using 'C:\Users\luong\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-10 07:00:52.894 +07:00 [INF] Now listening on: http://0.0.0.0:5053
2025-05-10 07:00:52.901 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-10 07:00:52.902 +07:00 [INF] Hosting environment: Development
2025-05-10 07:00:52.902 +07:00 [INF] Content root path: D:\StudioProject\Message-App\server
2025-05-10 07:06:47.407 +07:00 [ERR] An error occurred using the connection to database 'Message_app_db_1' on server 'localhost\SQLEXPRESS'.
2025-05-10 07:06:47.608 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'server.Data.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:c82b315b-ef25-4140-b7a1-3b31e9121bd9
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:c82b315b-ef25-4140-b7a1-3b31e9121bd9
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-10 07:06:48.110 +07:00 [INF] User profile is available. Using 'C:\Users\luong\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-10 07:06:48.235 +07:00 [WRN] Overriding address(es) 'http://localhost:5053'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-05-10 07:06:48.292 +07:00 [INF] Now listening on: http://[::]:5053
2025-05-10 07:06:48.293 +07:00 [INF] Now listening on: http://0.0.0.0:5053
2025-05-10 07:06:48.294 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-10 07:06:48.294 +07:00 [INF] Hosting environment: Development
2025-05-10 07:06:48.294 +07:00 [INF] Content root path: D:\StudioProject\Message-App\server
2025-05-10 07:11:28.213 +07:00 [ERR] An error occurred using the connection to database 'Message_app_db_1' on server 'localhost\SQLEXPRESS'.
2025-05-10 07:11:28.299 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'server.Data.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:4da4d788-7b6b-4f7f-8947-9b890a33c48f
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:4da4d788-7b6b-4f7f-8947-9b890a33c48f
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-10 07:11:28.467 +07:00 [INF] User profile is available. Using 'C:\Users\luong\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-10 07:11:28.583 +07:00 [WRN] Overriding address(es) 'http://localhost:5053'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-05-10 07:11:28.609 +07:00 [INF] Now listening on: http://[::]:5053
2025-05-10 07:11:28.610 +07:00 [INF] Now listening on: http://0.0.0.0:5053
2025-05-10 07:11:28.611 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-10 07:11:28.611 +07:00 [INF] Hosting environment: Development
2025-05-10 07:11:28.612 +07:00 [INF] Content root path: D:\StudioProject\Message-App\server
2025-05-10 07:15:28.587 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - null null
2025-05-10 07:15:28.832 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:15:28.844 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - 204 null null 261.0321ms
2025-05-10 07:15:28.853 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/login - application/json 62
2025-05-10 07:15:28.860 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:15:28.932 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:15:28.948 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-10 07:15:30.398 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 07:15:30.444 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:15:41.127 +07:00 [ERR] An error occurred using the connection to database 'Message_app_db_1' on server 'localhost\SQLEXPRESS'.
2025-05-10 07:15:41.227 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'server.Data.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d92a923d-61c6-4928-82af-3e1986833ba2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d92a923d-61c6-4928-82af-3e1986833ba2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-05-10 07:15:41.248 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 10798.1583ms
2025-05-10 07:15:41.250 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 07:15:41.255 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Message_app_db_1" requested by the login. The login failed.
Login failed for user 'QUYDEV\luong'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d92a923d-61c6-4928-82af-3e1986833ba2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at server.Services.UserService.UserSV.FindUserAsync(String email, String password) in D:\StudioProject\Message-App\server\Services\UserService\UserSV.cs:line 139
   at server.Services.AuthService.AuthSV.VerifyUser(LoginDTO model) in D:\StudioProject\Message-App\server\Services\AuthService\AuthSV.cs:line 53
   at Message_app.Controllers.AuthController.Login(LoginDTO model) in D:\StudioProject\Message-App\server\Controllers\AuthController.cs:line 142
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-10 07:15:41.382 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/login - 500 null text/plain; charset=utf-8 12528.0599ms
2025-05-10 07:20:53.768 +07:00 [INF] Application is shutting down...
2025-05-10 07:21:34.270 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:21:34.345 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:21:34.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:21:34.497 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-05-10 07:21:34.506 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:21:34.513 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:21:34.533 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:21:34.563 +07:00 [INF] Applying migration '20250406080352_ConversationUpdate'.
2025-05-10 07:21:34.660 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Conversations] ADD [lastMessage] nvarchar(max) NULL;
2025-05-10 07:23:21.233 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:23:21.338 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:23:21.343 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:23:21.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:23:21.380 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:23:21.413 +07:00 [INF] Applying migration '20250510002305_InitialCreate'.
2025-05-10 07:23:21.581 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:23:21.588 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:23:21.592 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:23:21.612 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:23:21.619 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:23:21.625 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.641 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.648 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.658 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:23:21.672 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.683 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.699 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.706 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.742 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:23:21.751 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:23:21.785 +07:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.537 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:26:03.615 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:26:03.620 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:26:03.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:26:03.651 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:26:03.687 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:26:03.850 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:26:03.854 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:26:03.858 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:26:03.867 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:26:03.874 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:26:03.880 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.885 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.892 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.905 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:26:03.911 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.923 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.931 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.942 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.956 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:26:03.961 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:26:04.008 +07:00 [ERR] Failed executing DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:56.764 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:29:56.861 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:29:56.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:29:56.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:29:56.907 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:29:56.939 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:29:57.068 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:29:57.074 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:29:57.079 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:29:57.094 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:29:57.100 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:29:57.115 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.137 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.145 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.152 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:29:57.171 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.181 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.195 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.211 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.237 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:29:57.270 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:29:57.326 +07:00 [ERR] Failed executing DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.330 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:31:00.407 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:31:00.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:31:00.415 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:31:00.465 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:31:00.509 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:31:00.666 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:31:00.672 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:31:00.677 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:31:00.692 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:31:00.703 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:31:00.718 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.725 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.738 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.752 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:31:00.760 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.774 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.789 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.826 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.838 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:31:00.845 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:31:00.883 +07:00 [ERR] Failed executing DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:27.855 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:33:27.947 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:33:27.957 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:33:27.961 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:33:28.000 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:33:28.030 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:33:28.152 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:33:28.165 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:33:28.174 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:33:28.183 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:33:28.190 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:33:28.200 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.208 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.221 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.229 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:33:28.235 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.240 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.254 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.264 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.274 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:33:28.280 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:33:28.337 +07:00 [ERR] Failed executing DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:37:33.404 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:37:33.559 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:37:33.593 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:38:16.235 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:38:16.356 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:38:16.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:38:16.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:38:16.426 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:38:16.459 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:38:16.641 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:38:16.682 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:38:16.692 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:38:16.711 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:38:16.720 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:38:16.730 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.750 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.756 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.778 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:38:16.793 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.801 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.821 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.842 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.851 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:38:16.874 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:38:16.961 +07:00 [ERR] Failed executing DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:08.422 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:42:08.514 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:42:08.539 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:42:38.982 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:42:39.087 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:42:39.092 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:42:39.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:42:39.136 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:42:39.190 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:42:39.353 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:42:39.358 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:42:39.366 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:42:39.376 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:42:39.382 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:42:39.416 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.426 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.446 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.453 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:42:39.460 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.479 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.504 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.525 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.545 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:42:39.550 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:42:39.593 +07:00 [ERR] Failed executing DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.145 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:43:55.256 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:43:55.262 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:43:55.268 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:43:55.324 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:43:55.365 +07:00 [INF] Applying migration '20250510002550_InitialCreate'.
2025-05-10 07:43:55.518 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:43:55.523 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:43:55.527 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:43:55.540 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:43:55.550 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:43:55.562 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.569 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.589 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.596 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:43:55.603 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.623 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.633 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.676 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.730 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Stories] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [expires_at] datetime2 NOT NULL,
    CONSTRAINT [PK_Stories] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Stories_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:43:55.757 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:43:55.813 +07:00 [ERR] Failed executing DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [StoryReactions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [story_id] int NOT NULL,
    [reaction_type] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [is_deleted] bit NOT NULL,
    [userid] int NOT NULL,
    CONSTRAINT [PK_StoryReactions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_StoryReactions_Stories_story_id] FOREIGN KEY ([story_id]) REFERENCES [Stories] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_StoryReactions_Users_userid] FOREIGN KEY ([userid]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:44:17.850 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:44:17.967 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:44:17.995 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:50:00.456 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:50:00.549 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:50:00.554 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-10 07:50:00.560 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-10 07:50:00.599 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-10 07:50:00.631 +07:00 [INF] Applying migration '20250510004939_UpdateStoryReactionForeignKeys'.
2025-05-10 07:50:00.782 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Conversations] (
    [id] int NOT NULL IDENTITY,
    [name] nvarchar(100) NOT NULL,
    [is_group] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [lastMessageTime] datetime2 NULL,
    [lastMessage] nvarchar(max) NULL,
    [lastMessageSender] nvarchar(max) NULL,
    [img_url] nvarchar(max) NULL,
    CONSTRAINT [PK_Conversations] PRIMARY KEY ([id])
);
2025-05-10 07:50:00.798 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [id] int NOT NULL IDENTITY,
    [role_name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([id])
);
2025-05-10 07:50:00.827 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [id] int NOT NULL IDENTITY,
    [username] nvarchar(200) NOT NULL,
    [password] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [email] nvarchar(450) NOT NULL,
    [avatar_url] nvarchar(max) NOT NULL,
    [birthday] date NOT NULL,
    [created_at] datetime2 NOT NULL,
    [gender] bit NOT NULL,
    [interests] nvarchar(500) NULL,
    [location] nvarchar(100) NULL,
    [bio] nvarchar(500) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([id])
);
2025-05-10 07:50:00.836 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [FriendRequests] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [ReceiverId] int NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_FriendRequests] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_FriendRequest_SenderReceiver] CHECK ([SenderId] != [ReceiverId]),
    CONSTRAINT [FK_FriendRequests_Users_ReceiverId] FOREIGN KEY ([ReceiverId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_FriendRequests_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:50:00.844 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Friends] (
    [Id] int NOT NULL IDENTITY,
    [UserId1] int NOT NULL,
    [UserId2] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Friends] PRIMARY KEY ([Id]),
    CONSTRAINT [CK_Friends_User1User2] CHECK ([UserId1] != [UserId2]),
    CONSTRAINT [FK_Friends_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Friends_Users_UserId2] FOREIGN KEY ([UserId2]) REFERENCES [Users] ([id]) ON DELETE NO ACTION
);
2025-05-10 07:50:00.852 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [GroupSettings] (
    [Id] int NOT NULL IDENTITY,
    [ConversationId] int NOT NULL,
    [Privacy] bit NOT NULL,
    [AllowMemberInvite] bit NOT NULL,
    [AllowMemberEdit] bit NOT NULL,
    [CreatedBy] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    [ImageUrl] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_GroupSettings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_GroupSettings_Conversations_ConversationId] FOREIGN KEY ([ConversationId]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_GroupSettings_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.860 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [messageDeletions] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [conversation_id] int NOT NULL,
    [cleared_at] datetime2 NOT NULL,
    CONSTRAINT [PK_messageDeletions] PRIMARY KEY ([id]),
    CONSTRAINT [FK_messageDeletions_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_messageDeletions_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.873 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [id] int NOT NULL IDENTITY,
    [content] nvarchar(500) NOT NULL,
    [sender_id] int NOT NULL,
    [is_read] bit NOT NULL,
    [type] nvarchar(max) NULL,
    [isFile] bit NOT NULL,
    [created_at] datetime2 NOT NULL,
    [conversation_id] int NOT NULL,
    [isRecalled] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Messages_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Users_sender_id] FOREIGN KEY ([sender_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.879 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MessageStatus] (
    [id] int NOT NULL IDENTITY,
    [message_id] int NOT NULL,
    [receiver_id] int NOT NULL,
    [status] nvarchar(50) NOT NULL,
    [updated_at] datetime2 NOT NULL,
    [Userid] int NULL,
    CONSTRAINT [PK_MessageStatus] PRIMARY KEY ([id]),
    CONSTRAINT [FK_MessageStatus_Users_Userid] FOREIGN KEY ([Userid]) REFERENCES [Users] ([id])
);
2025-05-10 07:50:00.896 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [id] int NOT NULL IDENTITY,
    [related_type] nvarchar(max) NOT NULL,
    [content] nvarchar(max) NOT NULL,
    [created_at] datetime2 NOT NULL,
    [user_id] int NOT NULL,
    [is_seen] bit NOT NULL,
    [related_id] int NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Notifications_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.905 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OTPs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [OTPCode] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [IsUsed] bit NOT NULL,
    CONSTRAINT [PK_OTPs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OTPs_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.929 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Participants] (
    [id] int NOT NULL IDENTITY,
    [conversation_id] int NOT NULL,
    [user_id] int NOT NULL,
    [role] nvarchar(max) NULL,
    [name] nvarchar(max) NULL,
    [joined_at] datetime2 NOT NULL,
    [adder] nvarchar(max) NOT NULL,
    [img_url] nvarchar(max) NULL,
    [is_deleted] bit NOT NULL,
    CONSTRAINT [PK_Participants] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Participants_Conversations_conversation_id] FOREIGN KEY ([conversation_id]) REFERENCES [Conversations] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Participants_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.939 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role_of_User] (
    [id] int NOT NULL IDENTITY,
    [user_id] int NOT NULL,
    [role_id] int NOT NULL,
    CONSTRAINT [PK_Role_of_User] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Role_of_User_Role_role_id] FOREIGN KEY ([role_id]) REFERENCES [Role] ([id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Role_of_User_Users_user_id] FOREIGN KEY ([user_id]) REFERENCES [Users] ([id]) ON DELETE CASCADE
);
2025-05-10 07:50:00.952 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachments] (
    [id] int NOT NULL IDENTITY,
    [file_url] nvarchar(255) NOT NULL,
    [FileSize] real NOT NULL,
    [file_type] nvarchar(50) NOT NULL,
    [uploaded_at] datetime2 NOT NULL,
    [is_temporary] bit NOT NULL,
    [message_id] int NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([id]),
    CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id])
);
2025-05-10 07:50:00.971 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attachments_message_id] ON [Attachments] ([message_id]);
2025-05-10 07:50:00.979 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_FriendRequests_ReceiverId] ON [FriendRequests] ([ReceiverId]);
2025-05-10 07:50:00.985 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_FriendRequests_SenderId] ON [FriendRequests] ([SenderId]);
2025-05-10 07:50:00.990 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Friends_UserId1_UserId2] ON [Friends] ([UserId1], [UserId2]);
2025-05-10 07:50:00.995 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Friends_UserId2] ON [Friends] ([UserId2]);
2025-05-10 07:50:01.014 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_GroupSettings_ConversationId] ON [GroupSettings] ([ConversationId]);
2025-05-10 07:50:01.019 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_GroupSettings_CreatedBy] ON [GroupSettings] ([CreatedBy]);
2025-05-10 07:50:01.024 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_messageDeletions_conversation_id] ON [messageDeletions] ([conversation_id]);
2025-05-10 07:50:01.033 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_messageDeletions_user_id] ON [messageDeletions] ([user_id]);
2025-05-10 07:50:01.047 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_conversation_id] ON [Messages] ([conversation_id]);
2025-05-10 07:50:01.053 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_sender_id] ON [Messages] ([sender_id]);
2025-05-10 07:50:01.078 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MessageStatus_Userid] ON [MessageStatus] ([Userid]);
2025-05-10 07:50:01.083 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_user_id] ON [Notifications] ([user_id]);
2025-05-10 07:50:01.089 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OTPs_UserId] ON [OTPs] ([UserId]);
2025-05-10 07:50:01.112 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Participants_conversation_id] ON [Participants] ([conversation_id]);
2025-05-10 07:50:01.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Participants_user_id] ON [Participants] ([user_id]);
2025-05-10 07:50:01.132 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Role_of_User_role_id] ON [Role_of_User] ([role_id]);
2025-05-10 07:50:01.142 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Role_of_User_user_id] ON [Role_of_User] ([user_id]);
2025-05-10 07:50:01.172 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250510004939_UpdateStoryReactionForeignKeys', N'8.0.4');
2025-05-10 07:51:19.027 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[username], [u].[avatar_url]
FROM [Users] AS [u]
2025-05-10 07:51:24.757 +07:00 [INF] User profile is available. Using 'C:\Users\luong\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-10 07:51:24.959 +07:00 [WRN] Overriding address(es) 'http://localhost:5053'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-05-10 07:51:24.980 +07:00 [INF] Now listening on: http://[::]:5053
2025-05-10 07:51:24.981 +07:00 [INF] Now listening on: http://0.0.0.0:5053
2025-05-10 07:51:24.985 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-10 07:51:24.985 +07:00 [INF] Hosting environment: Development
2025-05-10 07:51:24.986 +07:00 [INF] Content root path: D:\StudioProject\Message-App\server
2025-05-10 07:52:06.990 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - null null
2025-05-10 07:52:07.039 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:52:07.053 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - 204 null null 65.4693ms
2025-05-10 07:52:07.060 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - application/json 41
2025-05-10 07:52:07.063 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:52:07.132 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:52:07.133 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-10 07:52:07.287 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 07:52:07.328 +07:00 [INF] Route matched with {action = "SendOTPRegistration", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendOTPRegistration(EmailDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:52:10.397 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:52:10.451 +07:00 [INF] Executed action Message_app.Controllers.AuthController.SendOTPRegistration (Message_app) in 3117.3302ms
2025-05-10 07:52:10.451 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 07:52:10.455 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - 200 null application/json; charset=utf-8 3395.2948ms
2025-05-10 07:53:23.224 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - null null
2025-05-10 07:53:23.225 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:23.226 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - 204 null null 2.0297ms
2025-05-10 07:53:23.228 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - application/json 60
2025-05-10 07:53:23.228 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:23.232 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:23.235 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 07:53:23.270 +07:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(server.DTO.AuthDTO.OTPsRespose) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:53:23.325 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:53:23.367 +07:00 [INF] Executed action Message_app.Controllers.AuthController.VerifyOTP (Message_app) in 96.3958ms
2025-05-10 07:53:23.368 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 07:53:23.369 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - 200 null application/json; charset=utf-8 141.352ms
2025-05-10 07:53:23.505 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - null null
2025-05-10 07:53:23.506 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:23.507 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - 204 null null 1.2634ms
2025-05-10 07:53:23.508 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/register - application/json 167
2025-05-10 07:53:23.509 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:23.509 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:23.511 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 07:53:23.518 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(server.DTO.UserDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:53:23.709 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:53:23.710 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Register (Message_app) in 191.5353ms
2025-05-10 07:53:23.710 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 07:53:23.710 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/register - 400 null application/json; charset=utf-8 201.9575ms
2025-05-10 07:53:37.155 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - null null
2025-05-10 07:53:37.155 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:37.156 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - 204 null null 1.046ms
2025-05-10 07:53:37.157 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - application/json 60
2025-05-10 07:53:37.158 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:37.158 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:37.158 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 07:53:37.158 +07:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(server.DTO.AuthDTO.OTPsRespose) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:53:37.160 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:53:37.160 +07:00 [INF] Executed action Message_app.Controllers.AuthController.VerifyOTP (Message_app) in 1.5431ms
2025-05-10 07:53:37.160 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 07:53:37.160 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - 400 null application/json; charset=utf-8 2.9841ms
2025-05-10 07:53:43.936 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - null null
2025-05-10 07:53:43.936 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:43.936 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - 204 null null 0.5944ms
2025-05-10 07:53:43.938 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - application/json 41
2025-05-10 07:53:43.938 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:43.938 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:53:43.938 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 07:53:43.938 +07:00 [INF] Route matched with {action = "SendOTPRegistration", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendOTPRegistration(EmailDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:53:46.405 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:53:46.406 +07:00 [INF] Executed action Message_app.Controllers.AuthController.SendOTPRegistration (Message_app) in 2467.7215ms
2025-05-10 07:53:46.407 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 07:53:46.408 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - 200 null application/json; charset=utf-8 2469.5562ms
2025-05-10 07:54:14.144 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - null null
2025-05-10 07:54:14.144 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:54:14.145 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - 204 null null 0.9818ms
2025-05-10 07:54:14.147 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - application/json 60
2025-05-10 07:54:14.147 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:54:14.147 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:54:14.148 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 07:54:14.148 +07:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(server.DTO.AuthDTO.OTPsRespose) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:54:14.151 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:54:14.152 +07:00 [INF] Executed action Message_app.Controllers.AuthController.VerifyOTP (Message_app) in 3.4684ms
2025-05-10 07:54:14.153 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 07:54:14.153 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - 200 null application/json; charset=utf-8 6.1037ms
2025-05-10 07:54:14.181 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - null null
2025-05-10 07:54:14.181 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:54:14.182 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - 204 null null 0.5561ms
2025-05-10 07:54:14.191 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/register - application/json 167
2025-05-10 07:54:14.192 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:54:14.193 +07:00 [INF] CORS policy execution successful.
2025-05-10 07:54:14.193 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 07:54:14.193 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(server.DTO.UserDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 07:54:14.196 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 07:54:14.197 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Register (Message_app) in 4.1305ms
2025-05-10 07:54:14.279 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 07:54:14.279 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/register - 400 null application/json; charset=utf-8 87.4276ms
2025-05-10 07:57:40.213 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[username], [u].[avatar_url]
FROM [Users] AS [u]
2025-05-10 07:57:45.975 +07:00 [INF] User profile is available. Using 'C:\Users\luong\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-10 07:57:46.047 +07:00 [WRN] Overriding address(es) 'http://localhost:5053'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-05-10 07:57:46.060 +07:00 [INF] Now listening on: http://[::]:5053
2025-05-10 07:57:46.060 +07:00 [INF] Now listening on: http://0.0.0.0:5053
2025-05-10 07:57:46.060 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-10 07:57:46.060 +07:00 [INF] Hosting environment: Development
2025-05-10 07:57:46.060 +07:00 [INF] Content root path: D:\StudioProject\Message-App\server
2025-05-10 08:00:52.270 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - null null
2025-05-10 08:00:52.578 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:00:52.636 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - 204 null null 370.8981ms
2025-05-10 08:00:52.647 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - application/json 41
2025-05-10 08:00:52.652 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:00:52.739 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:00:52.749 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-10 08:00:52.988 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 08:00:53.037 +07:00 [INF] Route matched with {action = "SendOTPRegistration", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendOTPRegistration(EmailDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:00:56.135 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:00:56.190 +07:00 [INF] Executed action Message_app.Controllers.AuthController.SendOTPRegistration (Message_app) in 3147.3582ms
2025-05-10 08:00:56.191 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 08:00:56.289 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - 200 null application/json; charset=utf-8 3641.2902ms
2025-05-10 08:01:18.198 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - null null
2025-05-10 08:01:18.200 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:01:18.204 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - 204 null null 5.3421ms
2025-05-10 08:01:18.206 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - application/json 60
2025-05-10 08:01:18.207 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:01:18.258 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:01:18.263 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 08:01:18.313 +07:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(server.DTO.AuthDTO.OTPsRespose) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:01:18.359 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:01:18.489 +07:00 [INF] Executed action Message_app.Controllers.AuthController.VerifyOTP (Message_app) in 173.4318ms
2025-05-10 08:01:18.490 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 08:01:18.490 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - 200 null application/json; charset=utf-8 284.2017ms
2025-05-10 08:01:18.513 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - null null
2025-05-10 08:01:18.520 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:01:18.520 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - 204 null null 9.6583ms
2025-05-10 08:01:18.528 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/register - application/json 168
2025-05-10 08:01:18.528 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:01:18.529 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:01:18.537 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 08:01:18.555 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(server.DTO.UserDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:01:18.672 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:01:18.673 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Register (Message_app) in 117.7586ms
2025-05-10 08:01:18.674 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 08:01:18.675 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/register - 400 null application/json; charset=utf-8 147.248ms
2025-05-10 08:08:49.169 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[id], [u].[username], [u].[avatar_url]
FROM [Users] AS [u]
2025-05-10 08:08:55.115 +07:00 [INF] User profile is available. Using 'C:\Users\luong\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-10 08:08:55.186 +07:00 [WRN] Overriding address(es) 'http://localhost:5053'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-05-10 08:08:55.203 +07:00 [INF] Now listening on: http://[::]:5053
2025-05-10 08:08:55.203 +07:00 [INF] Now listening on: http://0.0.0.0:5053
2025-05-10 08:08:55.204 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-10 08:08:55.204 +07:00 [INF] Hosting environment: Development
2025-05-10 08:08:55.204 +07:00 [INF] Content root path: D:\StudioProject\Message-App\server
2025-05-10 08:09:07.547 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - null null
2025-05-10 08:09:07.577 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:07.582 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - 204 null null 37.0564ms
2025-05-10 08:09:07.587 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - application/json 41
2025-05-10 08:09:07.589 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:07.636 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:07.638 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-10 08:09:07.848 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 08:09:07.880 +07:00 [INF] Route matched with {action = "SendOTPRegistration", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendOTPRegistration(EmailDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:09:10.964 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:09:11.008 +07:00 [INF] Executed action Message_app.Controllers.AuthController.SendOTPRegistration (Message_app) in 3123.5079ms
2025-05-10 08:09:11.008 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 08:09:11.011 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - 200 null application/json; charset=utf-8 3423.7946ms
2025-05-10 08:09:28.244 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - null null
2025-05-10 08:09:28.245 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:28.245 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - 204 null null 1.4954ms
2025-05-10 08:09:28.246 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - application/json 60
2025-05-10 08:09:28.247 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:28.251 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:28.253 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 08:09:28.298 +07:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(server.DTO.AuthDTO.OTPsRespose) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:09:28.310 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:09:28.313 +07:00 [INF] Executed action Message_app.Controllers.AuthController.VerifyOTP (Message_app) in 14.8813ms
2025-05-10 08:09:28.348 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 08:09:28.348 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - 200 null application/json; charset=utf-8 101.9065ms
2025-05-10 08:09:28.518 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - null null
2025-05-10 08:09:28.518 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:28.519 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - 204 null null 0.6062ms
2025-05-10 08:09:28.521 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/register - application/json 168
2025-05-10 08:09:28.521 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:28.522 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:09:28.524 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 08:09:28.543 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(server.DTO.UserDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:09:28.994 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 500), @p2='?' (DbType = Date), @p3='?' (DbType = DateTime2), @p4='?' (Size = 450), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 100), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([avatar_url], [bio], [birthday], [created_at], [email], [gender], [interests], [location], [password], [passwordSalt], [username])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-05-10 08:09:29.037 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:09:29.113 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Register (Message_app) in 569.9486ms
2025-05-10 08:09:29.113 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 08:09:29.117 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/register - 200 null application/json; charset=utf-8 595.4591ms
2025-05-10 08:10:22.528 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - null null
2025-05-10 08:10:22.529 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:22.529 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - 204 null null 0.9245ms
2025-05-10 08:10:22.531 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/login - application/json 65
2025-05-10 08:10:22.531 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:22.532 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:22.532 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 08:10:22.539 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:10:22.783 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-10 08:10:23.211 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-05-10 08:10:23.214 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 674.4744ms
2025-05-10 08:10:23.214 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 08:10:23.215 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/login - 200 null application/json; charset=utf-8 684.3623ms
2025-05-10 08:10:23.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/GetAllFriends/1 - null null
2025-05-10 08:10:23.458 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:23.458 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:23.458 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetAllFriends (Message_app)'
2025-05-10 08:10:23.557 +07:00 [INF] Route matched with {action = "GetAllFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFriends(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:10:23.743 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[username]
    ELSE [u0].[username]
END AS [username], CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[avatar_url]
    ELSE [u0].[avatar_url]
END AS [avatar], CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[id]
    ELSE [u0].[id]
END AS [friendId], @__userId_0 AS [userId]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:10:23.744 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.DTO.FriendDTO, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:10:23.749 +07:00 [INF] Executed action server.Controllers.FriendsController.GetAllFriends (Message_app) in 191.3228ms
2025-05-10 08:10:23.749 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetAllFriends (Message_app)'
2025-05-10 08:10:23.749 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/GetAllFriends/1 - 200 null application/json; charset=utf-8 293.3364ms
2025-05-10 08:10:24.676 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Conversation/get_conversations/1 - null null
2025-05-10 08:10:24.676 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:24.677 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Conversation/get_conversations/1 - 204 null null 1.0532ms
2025-05-10 08:10:24.679 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - null null
2025-05-10 08:10:24.680 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:24.681 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:24.682 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:10:24.705 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-05-10 08:10:25.087 +07:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[name], [c].[is_group], [c].[created_at], [c].[lastMessage], [c].[lastMessageTime], [c].[img_url], [t].[Id], [t].[user_id], [t].[ConversationId], [t].[Name], [t].[IsDeleted], [t].[img_url]
FROM [Conversations] AS [c]
LEFT JOIN (
    SELECT [p0].[id] AS [Id], [p0].[user_id], [p0].[conversation_id] AS [ConversationId], [p0].[name] AS [Name], [p0].[is_deleted] AS [IsDeleted], [p0].[img_url]
    FROM [Participants] AS [p0]
    WHERE [p0].[is_deleted] = CAST(0 AS bit)
) AS [t] ON [c].[id] = [t].[ConversationId]
WHERE EXISTS (
    SELECT 1
    FROM [Participants] AS [p]
    WHERE [c].[id] = [p].[conversation_id] AND [p].[user_id] = @__userId_0)
ORDER BY [c].[id]
2025-05-10 08:10:25.088 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.DTO.ConversationDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:10:25.090 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 384.6125ms
2025-05-10 08:10:25.090 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:10:25.090 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - 200 null application/json; charset=utf-8 410.7157ms
2025-05-10 08:10:25.092 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - null null
2025-05-10 08:10:25.092 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:25.094 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:25.094 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:10:25.094 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-05-10 08:10:25.119 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[name], [c].[is_group], [c].[created_at], [c].[lastMessage], [c].[lastMessageTime], [c].[img_url], [t].[Id], [t].[user_id], [t].[ConversationId], [t].[Name], [t].[IsDeleted], [t].[img_url]
FROM [Conversations] AS [c]
LEFT JOIN (
    SELECT [p0].[id] AS [Id], [p0].[user_id], [p0].[conversation_id] AS [ConversationId], [p0].[name] AS [Name], [p0].[is_deleted] AS [IsDeleted], [p0].[img_url]
    FROM [Participants] AS [p0]
    WHERE [p0].[is_deleted] = CAST(0 AS bit)
) AS [t] ON [c].[id] = [t].[ConversationId]
WHERE EXISTS (
    SELECT 1
    FROM [Participants] AS [p]
    WHERE [c].[id] = [p].[conversation_id] AND [p].[user_id] = @__userId_0)
ORDER BY [c].[id]
2025-05-10 08:10:25.120 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.DTO.ConversationDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:10:25.120 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 25.8423ms
2025-05-10 08:10:25.120 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:10:25.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - 200 null application/json; charset=utf-8 29.1206ms
2025-05-10 08:10:59.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:10:59.925 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:59.927 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:10:59.928 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:10:59.965 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.150 +07:00 [INF] Executed DbCommand (128ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.152 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.154 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 188.3789ms
2025-05-10 08:11:00.154 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.154 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 230.0099ms
2025-05-10 08:11:00.156 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:11:00.156 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.156 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.157 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.157 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.180 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.181 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.181 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 24.2114ms
2025-05-10 08:11:00.181 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.182 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 26.0474ms
2025-05-10 08:11:00.184 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:11:00.184 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.185 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.185 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.185 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.189 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.190 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 5.0416ms
2025-05-10 08:11:00.190 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 6.1379ms
2025-05-10 08:11:00.195 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:11:00.195 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.196 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.196 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.196 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.200 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.201 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.201 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 4.554ms
2025-05-10 08:11:00.201 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:00.204 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 9.1513ms
2025-05-10 08:11:00.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:11:00.343 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.343 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.343 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.349 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.395 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.444 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.449 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 99.7571ms
2025-05-10 08:11:00.450 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 107.8073ms
2025-05-10 08:11:00.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:11:00.497 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.497 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.497 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.498 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.527 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.528 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.528 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 30.5389ms
2025-05-10 08:11:00.528 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.529 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 32.2343ms
2025-05-10 08:11:00.577 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:11:00.577 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.578 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.578 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.578 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.583 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.585 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 6.83ms
2025-05-10 08:11:00.585 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.585 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 8.2308ms
2025-05-10 08:11:00.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:11:00.611 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.611 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.611 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.611 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.647 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:11:00.647 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.648 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:00.648 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:00.718 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:00.755 +07:00 [INF] Executed DbCommand (136ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:00.756 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:00.758 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 146.7029ms
2025-05-10 08:11:00.760 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:00.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 151.5672ms
2025-05-10 08:11:00.900 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:11:01.023 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.118 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:11:01.232 +07:00 [INF] Executed DbCommand (107ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:11:01.258 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:01.265 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 547.1115ms
2025-05-10 08:11:01.265 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.266 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 618.8432ms
2025-05-10 08:11:01.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:11:01.275 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.275 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.275 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.276 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:01.281 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:11:01.316 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.320 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:11:01.333 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:11:01.337 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:01.338 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 61.9034ms
2025-05-10 08:11:01.338 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.339 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 64.2926ms
2025-05-10 08:11:01.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:11:01.342 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.342 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.342 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.342 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:01.346 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:11:01.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:11:01.364 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:11:01.364 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:01.364 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 21.8959ms
2025-05-10 08:11:01.365 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.365 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 22.8977ms
2025-05-10 08:11:01.371 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:11:01.372 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.372 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.372 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.372 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:01.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:11:01.377 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.378 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:11:01.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:11:01.380 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:01.381 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 8.3156ms
2025-05-10 08:11:01.381 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:01.381 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 9.7296ms
2025-05-10 08:11:01.678 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:01.679 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.679 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.680 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:01.684 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:01.797 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.803 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.804 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:01.816 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 132.1066ms
2025-05-10 08:11:01.817 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:01.820 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 141.7138ms
2025-05-10 08:11:01.823 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:01.823 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.823 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:01.824 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:01.824 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:01.895 +07:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.907 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:01.908 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:01.908 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 83.9475ms
2025-05-10 08:11:01.909 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:01.909 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 85.7959ms
2025-05-10 08:11:02.005 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:02.005 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:02.006 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:02.006 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:02.006 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:02.032 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:02.040 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:02.041 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:02.041 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 34.5242ms
2025-05-10 08:11:02.041 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:02.042 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 36.7695ms
2025-05-10 08:11:02.059 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:02.074 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:02.075 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:02.075 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:02.076 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:02.080 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:02.082 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:02.083 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:02.083 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 6.8568ms
2025-05-10 08:11:02.083 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:02.083 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 24.8053ms
2025-05-10 08:11:07.028 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:07.030 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:07.030 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:07.031 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:07.031 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:07.039 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:07.071 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:07.072 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:07.072 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 41.26ms
2025-05-10 08:11:07.072 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:07.072 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 43.9902ms
2025-05-10 08:11:07.338 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:07.338 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:07.339 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:07.339 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:07.339 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:07.355 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:07.392 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:07.393 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:07.393 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 53.8775ms
2025-05-10 08:11:07.396 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:07.396 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 58.8501ms
2025-05-10 08:11:08.755 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - null null
2025-05-10 08:11:08.755 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:08.756 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:08.756 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:11:08.762 +07:00 [INF] Route matched with {action = "GetUserProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProfile(Int32) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:11:08.887 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-05-10 08:11:08.986 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[id], [t].[avatar_url], [t].[bio], [t].[birthday], [t].[created_at], [t].[email], [t].[gender], [t].[interests], [t].[location], [t].[password], [t].[passwordSalt], [t].[username], [f].[Id], [f].[CreatedAt], [f].[UserId1], [f].[UserId2], [f0].[Id], [f0].[CreatedAt], [f0].[UserId1], [f0].[UserId2]
FROM (
    SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
    FROM [Users] AS [u]
    WHERE [u].[id] = @__userId_0
) AS [t]
LEFT JOIN [Friends] AS [f] ON [t].[id] = [f].[UserId1]
LEFT JOIN [Friends] AS [f0] ON [t].[id] = [f0].[UserId2]
ORDER BY [t].[id], [f].[Id]
2025-05-10 08:11:09.036 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType22`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateOnly, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:09.052 +07:00 [INF] Executed action server.Controllers.UserProfileController.GetUserProfile (Message_app) in 288.0905ms
2025-05-10 08:11:09.052 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:11:09.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - 200 null application/json; charset=utf-8 297.5678ms
2025-05-10 08:11:43.756 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:11:43.757 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:43.758 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:43.758 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:43.794 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:43.834 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:43.836 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:43.837 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 42.7984ms
2025-05-10 08:11:43.837 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:43.838 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 81.4027ms
2025-05-10 08:11:44.173 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:11:44.174 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:44.174 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:44.174 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:44.175 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:44.185 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:44.186 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:44.188 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 12.5807ms
2025-05-10 08:11:44.189 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:44.266 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 92.2761ms
2025-05-10 08:11:44.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:11:44.396 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:44.398 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:44.398 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:44.398 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:44.502 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:11:44.512 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:44.531 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:11:44.544 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:11:44.545 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:44.546 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 147.7669ms
2025-05-10 08:11:44.596 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:44.596 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 201.3954ms
2025-05-10 08:11:44.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:44.727 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:44.728 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:44.728 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:44.728 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:44.739 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:44.812 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:44.812 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:44.813 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 84.8187ms
2025-05-10 08:11:44.813 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:44.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 85.9317ms
2025-05-10 08:11:51.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:11:51.349 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:51.349 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:51.350 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:51.351 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:51.404 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:51.405 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:51.405 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 54.5644ms
2025-05-10 08:11:51.405 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:11:51.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 57.1786ms
2025-05-10 08:11:51.669 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:11:51.669 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:51.669 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:51.670 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:51.670 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:51.676 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:11:51.677 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:51.677 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 7.1571ms
2025-05-10 08:11:51.677 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:11:51.678 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 9.2141ms
2025-05-10 08:11:51.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:11:51.905 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:51.905 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:51.905 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:51.906 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:51.970 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:11:51.978 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.070 +07:00 [INF] Executed DbCommand (91ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:11:52.073 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:11:52.074 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:52.075 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 169.0896ms
2025-05-10 08:11:52.075 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:11:52.076 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 171.283ms
2025-05-10 08:11:52.497 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:52.497 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:52.497 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:52.497 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:52.497 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:52.508 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.532 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.533 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:52.534 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 35.8735ms
2025-05-10 08:11:52.534 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:52.534 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 37.1821ms
2025-05-10 08:11:52.558 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:52.559 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:52.559 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:52.559 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:52.559 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:52.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.564 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:52.564 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 4.9566ms
2025-05-10 08:11:52.564 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:52.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 6.7537ms
2025-05-10 08:11:52.686 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:11:52.686 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:52.687 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:52.687 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:52.687 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:11:52.702 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.723 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:11:52.723 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:52.724 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 36.6626ms
2025-05-10 08:11:52.724 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:11:52.725 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 39.2079ms
2025-05-10 08:11:54.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - null null
2025-05-10 08:11:54.923 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:54.924 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:11:54.925 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:11:54.925 +07:00 [INF] Route matched with {action = "GetUserProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProfile(Int32) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:11:55.002 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[id], [t].[avatar_url], [t].[bio], [t].[birthday], [t].[created_at], [t].[email], [t].[gender], [t].[interests], [t].[location], [t].[password], [t].[passwordSalt], [t].[username], [f].[Id], [f].[CreatedAt], [f].[UserId1], [f].[UserId2], [f0].[Id], [f0].[CreatedAt], [f0].[UserId1], [f0].[UserId2]
FROM (
    SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
    FROM [Users] AS [u]
    WHERE [u].[id] = @__userId_0
) AS [t]
LEFT JOIN [Friends] AS [f] ON [t].[id] = [f].[UserId1]
LEFT JOIN [Friends] AS [f0] ON [t].[id] = [f0].[UserId2]
ORDER BY [t].[id], [f].[Id]
2025-05-10 08:11:55.003 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType22`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateOnly, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:11:55.003 +07:00 [INF] Executed action server.Controllers.UserProfileController.GetUserProfile (Message_app) in 77.8909ms
2025-05-10 08:11:55.003 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:11:55.003 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - 200 null application/json; charset=utf-8 81.2599ms
2025-05-10 08:12:00.205 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/user/generate-qr/1 - null null
2025-05-10 08:12:00.205 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:12:00.206 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/user/generate-qr/1 - 204 null null 0.4663ms
2025-05-10 08:12:00.208 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/user/generate-qr/1 - null null
2025-05-10 08:12:00.209 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:12:00.209 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:12:00.209 +07:00 [INF] Executing endpoint 'server.Controllers.UserController.GenerateQrCode (Message_app)'
2025-05-10 08:12:00.216 +07:00 [INF] Route matched with {action = "GenerateQrCode", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GenerateQrCode(Int32) on controller server.Controllers.UserController (Message_app).
2025-05-10 08:12:02.579 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__p_0
2025-05-10 08:12:03.247 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType21`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:12:03.249 +07:00 [INF] Executed action server.Controllers.UserController.GenerateQrCode (Message_app) in 3032.4994ms
2025-05-10 08:12:03.249 +07:00 [INF] Executed endpoint 'server.Controllers.UserController.GenerateQrCode (Message_app)'
2025-05-10 08:12:03.250 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/user/generate-qr/1 - 200 null application/json; charset=utf-8 3041.4254ms
2025-05-10 08:13:09.188 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:13:09.189 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:09.189 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:09.190 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:13:09.190 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:09.301 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:13:09.302 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:09.304 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 113.5928ms
2025-05-10 08:13:09.304 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:13:09.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 117.6883ms
2025-05-10 08:13:09.557 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:13:09.557 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:09.559 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:09.559 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:13:09.559 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:09.568 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:13:09.572 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:09.573 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 13.8213ms
2025-05-10 08:13:09.574 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:13:09.591 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 34.2933ms
2025-05-10 08:13:09.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:13:09.790 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:09.790 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:09.791 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:13:09.791 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:09.953 +07:00 [INF] Executed DbCommand (159ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:13:10.007 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:10.082 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:13:10.088 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:13:10.088 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:10.088 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 296.3226ms
2025-05-10 08:13:10.088 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:13:10.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 298.7809ms
2025-05-10 08:13:10.213 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:13:10.213 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:10.213 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:10.213 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:10.213 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:10.224 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:10.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:10.227 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:10.227 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 13.7678ms
2025-05-10 08:13:10.227 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:10.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 14.8858ms
2025-05-10 08:13:12.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:13:12.728 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:12.728 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:12.728 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:12.728 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:12.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:12.733 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:12.733 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:12.733 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 4.9238ms
2025-05-10 08:13:12.733 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:12.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 5.7876ms
2025-05-10 08:13:12.757 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:13:12.758 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:12.759 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:12.760 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:12.760 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:12.764 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:12.767 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:12.768 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:12.769 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 8.9311ms
2025-05-10 08:13:12.770 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:12.770 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 12.8899ms
2025-05-10 08:13:20.188 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:13:20.189 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:20.189 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:20.189 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:20.189 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:20.193 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:20.195 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:20.195 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:20.195 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 5.6802ms
2025-05-10 08:13:20.195 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:20.195 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 6.8912ms
2025-05-10 08:13:20.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:13:20.198 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:20.198 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:20.198 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:20.198 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:20.199 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:20.201 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:20.201 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:20.201 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 3.1837ms
2025-05-10 08:13:20.201 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:20.201 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 3.8486ms
2025-05-10 08:13:32.345 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - null null
2025-05-10 08:13:32.346 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:32.346 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:32.346 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:13:32.346 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:32.419 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:13:32.419 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:32.419 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 72.881ms
2025-05-10 08:13:32.419 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:13:32.420 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/1 - 200 null application/json; charset=utf-8 74.1694ms
2025-05-10 08:13:32.681 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - null null
2025-05-10 08:13:32.682 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:32.682 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:32.682 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:13:32.682 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:32.690 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:13:32.692 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:32.692 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 9.9825ms
2025-05-10 08:13:32.692 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:13:32.693 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/1 - 200 null application/json; charset=utf-8 11.5897ms
2025-05-10 08:13:32.879 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - null null
2025-05-10 08:13:32.879 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:32.879 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:32.880 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:13:32.880 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:32.885 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:13:32.967 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:32.976 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:13:32.996 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:13:32.996 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:32.997 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 116.4254ms
2025-05-10 08:13:32.997 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:13:32.997 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/1 - 200 null application/json; charset=utf-8 117.9216ms
2025-05-10 08:13:33.215 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:13:33.216 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:33.216 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:33.216 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:33.217 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:13:33.247 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:33.325 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:13:33.326 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:33.326 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 109.4968ms
2025-05-10 08:13:33.326 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:13:33.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 111.071ms
2025-05-10 08:13:38.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - null null
2025-05-10 08:13:38.050 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:38.050 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:38.050 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:13:38.050 +07:00 [INF] Route matched with {action = "GetUserProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProfile(Int32) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:13:38.123 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[id], [t].[avatar_url], [t].[bio], [t].[birthday], [t].[created_at], [t].[email], [t].[gender], [t].[interests], [t].[location], [t].[password], [t].[passwordSalt], [t].[username], [f].[Id], [f].[CreatedAt], [f].[UserId1], [f].[UserId2], [f0].[Id], [f0].[CreatedAt], [f0].[UserId1], [f0].[UserId2]
FROM (
    SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
    FROM [Users] AS [u]
    WHERE [u].[id] = @__userId_0
) AS [t]
LEFT JOIN [Friends] AS [f] ON [t].[id] = [f].[UserId1]
LEFT JOIN [Friends] AS [f0] ON [t].[id] = [f0].[UserId2]
ORDER BY [t].[id], [f].[Id]
2025-05-10 08:13:38.125 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType22`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateOnly, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:13:38.125 +07:00 [INF] Executed action server.Controllers.UserProfileController.GetUserProfile (Message_app) in 74.9818ms
2025-05-10 08:13:38.125 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:13:38.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - 200 null application/json; charset=utf-8 75.9856ms
2025-05-10 08:13:58.191 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/UserProfile/update/profile/1 - null null
2025-05-10 08:13:58.191 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:58.192 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/UserProfile/update/profile/1 - 204 null null 0.4312ms
2025-05-10 08:13:58.196 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5053/api/UserProfile/update/profile/1 - application/json; charset=utf-8 279
2025-05-10 08:13:58.196 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:58.196 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:13:58.196 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.UpdateProfile (Message_app)'
2025-05-10 08:13:58.201 +07:00 [INF] Route matched with {action = "UpdateProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateProfileDTO) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:13:58.353 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:13:58.412 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 500), @p2='?' (DbType = Date), @p3='?' (DbType = DateTime2), @p4='?' (Size = 450), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 100), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [avatar_url] = @p0, [bio] = @p1, [birthday] = @p2, [created_at] = @p3, [email] = @p4, [gender] = @p5, [interests] = @p6, [location] = @p7, [password] = @p8, [passwordSalt] = @p9, [username] = @p10
OUTPUT 1
WHERE [id] = @p11;
2025-05-10 08:13:58.416 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType23`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:13:58.418 +07:00 [INF] Executed action server.Controllers.UserProfileController.UpdateProfile (Message_app) in 216.8761ms
2025-05-10 08:13:58.418 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.UpdateProfile (Message_app)'
2025-05-10 08:13:58.419 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5053/api/UserProfile/update/profile/1 - 200 null application/json; charset=utf-8 222.7784ms
2025-05-10 08:14:42.037 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - null null
2025-05-10 08:14:42.037 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:14:42.038 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/send-otp-registration - 204 null null 1.1003ms
2025-05-10 08:14:42.039 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - application/json 37
2025-05-10 08:14:42.040 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:14:42.040 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:14:42.040 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 08:14:42.040 +07:00 [INF] Route matched with {action = "SendOTPRegistration", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendOTPRegistration(EmailDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:14:45.114 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:14:45.114 +07:00 [INF] Executed action Message_app.Controllers.AuthController.SendOTPRegistration (Message_app) in 3073.4998ms
2025-05-10 08:14:45.114 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.SendOTPRegistration (Message_app)'
2025-05-10 08:14:45.114 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/send-otp-registration - 200 null application/json; charset=utf-8 3074.473ms
2025-05-10 08:15:03.888 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - null null
2025-05-10 08:15:03.889 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:03.889 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/verify-otp - 204 null null 0.8355ms
2025-05-10 08:15:03.892 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - application/json 56
2025-05-10 08:15:03.892 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:03.892 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:03.893 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 08:15:03.893 +07:00 [INF] Route matched with {action = "VerifyOTP", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyOTP(server.DTO.AuthDTO.OTPsRespose) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:15:03.895 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:03.895 +07:00 [INF] Executed action Message_app.Controllers.AuthController.VerifyOTP (Message_app) in 2.0327ms
2025-05-10 08:15:03.895 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.VerifyOTP (Message_app)'
2025-05-10 08:15:03.896 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/verify-otp - 200 null application/json; charset=utf-8 3.9126ms
2025-05-10 08:15:04.087 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - null null
2025-05-10 08:15:04.087 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:04.088 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/register - 204 null null 0.7728ms
2025-05-10 08:15:04.091 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/register - application/json 163
2025-05-10 08:15:04.091 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:04.091 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:04.092 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 08:15:04.092 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(server.DTO.UserDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:15:04.141 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 500), @p2='?' (DbType = Date), @p3='?' (DbType = DateTime2), @p4='?' (Size = 450), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 100), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([avatar_url], [bio], [birthday], [created_at], [email], [gender], [interests], [location], [password], [passwordSalt], [username])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-05-10 08:15:04.143 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:15:04.144 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Register (Message_app) in 52.0119ms
2025-05-10 08:15:04.144 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Register (Message_app)'
2025-05-10 08:15:04.144 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/register - 200 null application/json; charset=utf-8 53.1644ms
2025-05-10 08:15:11.227 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - null null
2025-05-10 08:15:11.227 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:11.227 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - 204 null null 0.5498ms
2025-05-10 08:15:11.229 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/login - application/json 61
2025-05-10 08:15:11.229 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:11.229 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:11.229 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 08:15:11.229 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:15:11.234 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-10 08:15:11.236 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-05-10 08:15:11.236 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 6.8042ms
2025-05-10 08:15:11.236 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 08:15:11.236 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/login - 200 null application/json; charset=utf-8 7.4683ms
2025-05-10 08:15:11.651 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/GetAllFriends/2 - null null
2025-05-10 08:15:11.651 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:11.651 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:11.651 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetAllFriends (Message_app)'
2025-05-10 08:15:11.651 +07:00 [INF] Route matched with {action = "GetAllFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFriends(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:11.725 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[username]
    ELSE [u0].[username]
END AS [username], CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[avatar_url]
    ELSE [u0].[avatar_url]
END AS [avatar], CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[id]
    ELSE [u0].[id]
END AS [friendId], @__userId_0 AS [userId]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:11.725 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.DTO.FriendDTO, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:11.725 +07:00 [INF] Executed action server.Controllers.FriendsController.GetAllFriends (Message_app) in 73.9221ms
2025-05-10 08:15:11.725 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetAllFriends (Message_app)'
2025-05-10 08:15:11.726 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/GetAllFriends/2 - 200 null application/json; charset=utf-8 74.9837ms
2025-05-10 08:15:12.104 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Conversation/get_conversations/2 - null null
2025-05-10 08:15:12.105 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:12.105 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Conversation/get_conversations/2 - 204 null null 0.6275ms
2025-05-10 08:15:12.107 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/2 - null null
2025-05-10 08:15:12.107 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:12.108 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:12.108 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:15:12.108 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-05-10 08:15:12.234 +07:00 [INF] Executed DbCommand (122ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[name], [c].[is_group], [c].[created_at], [c].[lastMessage], [c].[lastMessageTime], [c].[img_url], [t].[Id], [t].[user_id], [t].[ConversationId], [t].[Name], [t].[IsDeleted], [t].[img_url]
FROM [Conversations] AS [c]
LEFT JOIN (
    SELECT [p0].[id] AS [Id], [p0].[user_id], [p0].[conversation_id] AS [ConversationId], [p0].[name] AS [Name], [p0].[is_deleted] AS [IsDeleted], [p0].[img_url]
    FROM [Participants] AS [p0]
    WHERE [p0].[is_deleted] = CAST(0 AS bit)
) AS [t] ON [c].[id] = [t].[ConversationId]
WHERE EXISTS (
    SELECT 1
    FROM [Participants] AS [p]
    WHERE [c].[id] = [p].[conversation_id] AND [p].[user_id] = @__userId_0)
ORDER BY [c].[id]
2025-05-10 08:15:12.236 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.DTO.ConversationDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:15:12.236 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 128.2934ms
2025-05-10 08:15:12.236 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:15:12.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/2 - 200 null application/json; charset=utf-8 129.306ms
2025-05-10 08:15:12.245 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/2 - null null
2025-05-10 08:15:12.245 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:12.245 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:12.246 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:15:12.246 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-05-10 08:15:12.264 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[name], [c].[is_group], [c].[created_at], [c].[lastMessage], [c].[lastMessageTime], [c].[img_url], [t].[Id], [t].[user_id], [t].[ConversationId], [t].[Name], [t].[IsDeleted], [t].[img_url]
FROM [Conversations] AS [c]
LEFT JOIN (
    SELECT [p0].[id] AS [Id], [p0].[user_id], [p0].[conversation_id] AS [ConversationId], [p0].[name] AS [Name], [p0].[is_deleted] AS [IsDeleted], [p0].[img_url]
    FROM [Participants] AS [p0]
    WHERE [p0].[is_deleted] = CAST(0 AS bit)
) AS [t] ON [c].[id] = [t].[ConversationId]
WHERE EXISTS (
    SELECT 1
    FROM [Participants] AS [p]
    WHERE [c].[id] = [p].[conversation_id] AND [p].[user_id] = @__userId_0)
ORDER BY [c].[id]
2025-05-10 08:15:12.264 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.DTO.ConversationDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:15:12.264 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 18.2139ms
2025-05-10 08:15:12.264 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:15:12.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/2 - 200 null application/json; charset=utf-8 19.5702ms
2025-05-10 08:15:13.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:15:13.512 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.512 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.513 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.513 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:13.597 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:13.598 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:13.598 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 85.2095ms
2025-05-10 08:15:13.598 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.599 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 86.6307ms
2025-05-10 08:15:13.658 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:15:13.659 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.659 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.659 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.660 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:13.664 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:13.665 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:13.665 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 5.6643ms
2025-05-10 08:15:13.665 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.666 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 7.1318ms
2025-05-10 08:15:13.672 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:15:13.673 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.675 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.676 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.679 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:13.751 +07:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:13.752 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:13.752 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 72.0991ms
2025-05-10 08:15:13.752 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.752 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 79.8453ms
2025-05-10 08:15:13.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:15:13.768 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.768 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.769 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.769 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:13.871 +07:00 [INF] Executed DbCommand (100ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:13.872 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:13.872 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 103.0128ms
2025-05-10 08:15:13.872 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:13.872 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 104.7047ms
2025-05-10 08:15:13.926 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:15:13.926 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.926 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:13.926 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:13.926 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:14.039 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:14.040 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:14.040 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 113.506ms
2025-05-10 08:15:14.040 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 114.4471ms
2025-05-10 08:15:14.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:15:14.165 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.165 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.165 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.166 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:14.244 +07:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:14.244 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:14.245 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 79.1318ms
2025-05-10 08:15:14.246 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 81.1954ms
2025-05-10 08:15:14.389 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:15:14.389 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.389 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.389 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.391 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:14.394 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:15:14.395 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.395 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.395 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:14.395 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:14.404 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:14.404 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:14.404 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 12.9091ms
2025-05-10 08:15:14.404 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.404 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 15.357ms
2025-05-10 08:15:14.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:15:14.465 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.465 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.465 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.465 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:14.483 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:14.515 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:14.524 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:15:14.541 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:15:14.541 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:14.541 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 146.142ms
2025-05-10 08:15:14.541 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:14.541 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 147.0792ms
2025-05-10 08:15:14.695 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:14.696 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:14.696 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 230.9932ms
2025-05-10 08:15:14.697 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:14.697 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 240.431ms
2025-05-10 08:15:14.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/UserProfile/2/profile - null null
2025-05-10 08:15:14.793 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.793 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:14.793 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:15:14.793 +07:00 [INF] Route matched with {action = "GetUserProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProfile(Int32) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:15:14.947 +07:00 [INF] Executed DbCommand (96ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[id], [t].[avatar_url], [t].[bio], [t].[birthday], [t].[created_at], [t].[email], [t].[gender], [t].[interests], [t].[location], [t].[password], [t].[passwordSalt], [t].[username], [f].[Id], [f].[CreatedAt], [f].[UserId1], [f].[UserId2], [f0].[Id], [f0].[CreatedAt], [f0].[UserId1], [f0].[UserId2]
FROM (
    SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
    FROM [Users] AS [u]
    WHERE [u].[id] = @__userId_0
) AS [t]
LEFT JOIN [Friends] AS [f] ON [t].[id] = [f].[UserId1]
LEFT JOIN [Friends] AS [f0] ON [t].[id] = [f0].[UserId2]
ORDER BY [t].[id], [f].[Id]
2025-05-10 08:15:14.948 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType22`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateOnly, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:14.948 +07:00 [INF] Executed action server.Controllers.UserProfileController.GetUserProfile (Message_app) in 154.1409ms
2025-05-10 08:15:14.948 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:15:14.949 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/UserProfile/2/profile - 200 null application/json; charset=utf-8 156.2076ms
2025-05-10 08:15:15.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:15:15.063 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.063 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.063 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:15.064 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:15.212 +07:00 [INF] Executed DbCommand (147ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:15.216 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:15.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:15:15.221 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:15:15.222 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:15.222 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 158.1552ms
2025-05-10 08:15:15.222 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:15.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 159.2975ms
2025-05-10 08:15:15.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:15.231 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.232 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.232 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:15.232 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:15.234 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:15:15.234 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.234 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.234 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:15.234 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:15.236 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:15.238 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:15.241 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:15:15.243 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:15:15.246 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:15.246 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 11.5599ms
2025-05-10 08:15:15.246 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:15.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 12.1434ms
2025-05-10 08:15:15.270 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:15:15.270 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.270 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.270 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:15.270 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:15.313 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:15.342 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:15.350 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:15:15.359 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:15:15.359 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:15.359 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 89.0108ms
2025-05-10 08:15:15.360 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:15.360 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 89.6146ms
2025-05-10 08:15:15.529 +07:00 [INF] Executed DbCommand (296ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:15.537 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:15.537 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:15.538 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 305.4304ms
2025-05-10 08:15:15.538 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:15.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 306.6724ms
2025-05-10 08:15:15.850 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:15.851 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.851 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:15.851 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:15.851 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:15.883 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:16.168 +07:00 [INF] Executed DbCommand (284ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:16.168 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:16.168 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 317.4623ms
2025-05-10 08:15:16.168 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:16.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 318.027ms
2025-05-10 08:15:16.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:16.172 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:16.172 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:16.172 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:16.172 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:16.206 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:16.220 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:16.220 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:16.220 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 48.3161ms
2025-05-10 08:15:16.220 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:16.220 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 48.9811ms
2025-05-10 08:15:16.225 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:16.225 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:16.225 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:16.226 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:16.226 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:16.228 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:16.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:16.231 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:16.232 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 5.9545ms
2025-05-10 08:15:16.232 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:16.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 6.8024ms
2025-05-10 08:15:42.113 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/UserProfile/update/profile/2 - null null
2025-05-10 08:15:42.115 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:42.116 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/UserProfile/update/profile/2 - 204 null null 2.4736ms
2025-05-10 08:15:42.118 +07:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5053/api/UserProfile/update/profile/2 - application/json; charset=utf-8 274
2025-05-10 08:15:42.118 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:42.118 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:42.118 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.UpdateProfile (Message_app)'
2025-05-10 08:15:42.118 +07:00 [INF] Route matched with {action = "UpdateProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateProfileDTO) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:15:42.140 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:42.167 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 500), @p2='?' (DbType = Date), @p3='?' (DbType = DateTime2), @p4='?' (Size = 450), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 100), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [avatar_url] = @p0, [bio] = @p1, [birthday] = @p2, [created_at] = @p3, [email] = @p4, [gender] = @p5, [interests] = @p6, [location] = @p7, [password] = @p8, [passwordSalt] = @p9, [username] = @p10
OUTPUT 1
WHERE [id] = @p11;
2025-05-10 08:15:42.168 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType23`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:15:42.168 +07:00 [INF] Executed action server.Controllers.UserProfileController.UpdateProfile (Message_app) in 49.7664ms
2025-05-10 08:15:42.168 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.UpdateProfile (Message_app)'
2025-05-10 08:15:42.169 +07:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5053/api/UserProfile/update/profile/2 - 200 null application/json; charset=utf-8 50.8485ms
2025-05-10 08:15:45.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:15:45.228 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.228 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.228 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:45.228 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:45.235 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:45.235 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:45.235 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 6.5547ms
2025-05-10 08:15:45.235 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:45.235 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 7.0413ms
2025-05-10 08:15:45.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:15:45.591 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.591 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.591 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:45.591 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:45.665 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:45.665 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:45.666 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 74.3387ms
2025-05-10 08:15:45.666 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:45.666 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 75.0005ms
2025-05-10 08:15:45.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:15:45.786 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.786 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.786 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:45.786 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:45.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:45.792 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:45.796 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:15:45.798 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:15:45.799 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:45.799 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 12.832ms
2025-05-10 08:15:45.799 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:45.799 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 13.4006ms
2025-05-10 08:15:45.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:45.909 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.909 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:45.909 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:45.909 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:45.986 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:45.989 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:45.990 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:45.990 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 80.4908ms
2025-05-10 08:15:45.990 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:45.990 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 81.8395ms
2025-05-10 08:15:51.182 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:15:51.182 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:51.182 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:51.182 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:51.182 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:51.186 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:51.233 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:51.233 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 51.1083ms
2025-05-10 08:15:51.233 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:15:51.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 51.7147ms
2025-05-10 08:15:51.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:15:51.536 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:51.536 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:51.536 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:51.536 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:51.539 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:15:51.539 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:51.539 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 2.5031ms
2025-05-10 08:15:51.539 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:15:51.539 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 3.3088ms
2025-05-10 08:15:51.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:15:51.830 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:51.830 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:51.830 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:51.830 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:51.833 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:15:51.835 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:51.837 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:15:51.839 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:15:51.839 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:51.839 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 9.3345ms
2025-05-10 08:15:51.840 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:15:51.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 10.4481ms
2025-05-10 08:15:52.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:52.052 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:52.052 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:52.053 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:52.053 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:52.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:52.056 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:52.056 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:52.056 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 3.8004ms
2025-05-10 08:15:52.057 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:52.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 4.4229ms
2025-05-10 08:15:53.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:53.818 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:53.819 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:53.819 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:53.819 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:53.821 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:53.822 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:53.822 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:53.822 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 3.5105ms
2025-05-10 08:15:53.822 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:53.822 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 4.1358ms
2025-05-10 08:15:53.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:53.827 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:53.827 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:53.827 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:53.827 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:53.829 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:53.830 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:53.831 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:53.831 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 3.6983ms
2025-05-10 08:15:53.831 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:53.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 4.4363ms
2025-05-10 08:15:55.689 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:55.689 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:55.690 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:55.690 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:55.690 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:55.693 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:55.694 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:55.695 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:55.695 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 4.9715ms
2025-05-10 08:15:55.695 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:55.695 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 5.8147ms
2025-05-10 08:15:55.714 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:15:55.715 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:55.715 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:15:55.716 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:55.716 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:15:55.718 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:55.721 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:15:55.722 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:15:55.722 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 6.1453ms
2025-05-10 08:15:55.722 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:15:55.722 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 8.0755ms
2025-05-10 08:16:02.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/UserProfile/2/profile - null null
2025-05-10 08:16:02.594 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:02.594 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:02.594 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:16:02.594 +07:00 [INF] Route matched with {action = "GetUserProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProfile(Int32) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:16:02.667 +07:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[id], [t].[avatar_url], [t].[bio], [t].[birthday], [t].[created_at], [t].[email], [t].[gender], [t].[interests], [t].[location], [t].[password], [t].[passwordSalt], [t].[username], [f].[Id], [f].[CreatedAt], [f].[UserId1], [f].[UserId2], [f0].[Id], [f0].[CreatedAt], [f0].[UserId1], [f0].[UserId2]
FROM (
    SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
    FROM [Users] AS [u]
    WHERE [u].[id] = @__userId_0
) AS [t]
LEFT JOIN [Friends] AS [f] ON [t].[id] = [f].[UserId1]
LEFT JOIN [Friends] AS [f0] ON [t].[id] = [f0].[UserId2]
ORDER BY [t].[id], [f].[Id]
2025-05-10 08:16:02.668 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType22`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateOnly, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:02.669 +07:00 [INF] Executed action server.Controllers.UserProfileController.GetUserProfile (Message_app) in 74.6308ms
2025-05-10 08:16:02.669 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:16:02.669 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/UserProfile/2/profile - 200 null application/json; charset=utf-8 75.4601ms
2025-05-10 08:16:06.765 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:06.765 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:06.765 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:06.765 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:06.765 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:06.768 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:06.769 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:06.770 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:06.770 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 4.5199ms
2025-05-10 08:16:06.770 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:06.770 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 5.1828ms
2025-05-10 08:16:06.776 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:06.776 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:06.776 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:06.776 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:06.776 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:06.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:06.793 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:06.793 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:06.793 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 16.9604ms
2025-05-10 08:16:06.794 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:06.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 17.7412ms
2025-05-10 08:16:30.345 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:30.346 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:30.347 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:30.347 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:30.347 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:30.359 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:30.489 +07:00 [INF] Executed DbCommand (117ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:30.489 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:30.490 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 142.7275ms
2025-05-10 08:16:30.490 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:30.490 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 145.0387ms
2025-05-10 08:16:34.632 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:34.632 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:34.632 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:34.632 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:34.632 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:34.634 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:34.636 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:34.636 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:34.637 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 4.5456ms
2025-05-10 08:16:34.637 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:34.637 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 5.3619ms
2025-05-10 08:16:41.684 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:41.684 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:41.684 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:41.685 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:41.685 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:41.726 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:41.846 +07:00 [INF] Executed DbCommand (119ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:41.847 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:41.849 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 162.433ms
2025-05-10 08:16:41.850 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:41.850 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 166.3904ms
2025-05-10 08:16:51.371 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - null null
2025-05-10 08:16:51.371 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:51.371 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:51.371 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:16:51.371 +07:00 [INF] Route matched with {action = "GetReceivedFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetReceivedFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:51.454 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[SenderId] = [u].[id]
WHERE [f].[ReceiverId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:16:51.454 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType11`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:51.454 +07:00 [INF] Executed action server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app) in 82.7232ms
2025-05-10 08:16:51.454 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetReceivedFriendRequests (Message_app)'
2025-05-10 08:16:51.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/requests/received/2 - 200 null application/json; charset=utf-8 83.5768ms
2025-05-10 08:16:51.716 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - null null
2025-05-10 08:16:51.716 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:51.717 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:51.717 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:16:51.717 +07:00 [INF] Route matched with {action = "GetSentFriendRequests", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSentFriendRequests(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:51.726 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[SenderId], [f].[ReceiverId], [u].[username] AS [Username], [u].[avatar_url] AS [AvatarUrl], [f].[Status], [f].[CreatedAt], 0 AS [MutualFriendsCount]
FROM [FriendRequests] AS [f]
INNER JOIN [Users] AS [u] ON [f].[ReceiverId] = [u].[id]
WHERE [f].[SenderId] = @__userId_0 AND [f].[Status] = N'Pending'
2025-05-10 08:16:51.726 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendRequestDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:51.727 +07:00 [INF] Executed action server.Controllers.FriendsController.GetSentFriendRequests (Message_app) in 9.8623ms
2025-05-10 08:16:51.727 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetSentFriendRequests (Message_app)'
2025-05-10 08:16:51.727 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/get-sent-requests/2 - 200 null application/json; charset=utf-8 10.8339ms
2025-05-10 08:16:52.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - null null
2025-05-10 08:16:52.022 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:52.022 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:52.022 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:16:52.022 +07:00 [INF] Route matched with {action = "GetFriendSuggestions", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendSuggestions(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:52.039 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[id] = @__userId_0
2025-05-10 08:16:52.045 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:52.049 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[ReceiverId]
FROM [FriendRequests] AS [f]
WHERE [f].[SenderId] = @__userId_0
2025-05-10 08:16:52.091 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[SenderId]
FROM [FriendRequests] AS [f]
WHERE [f].[ReceiverId] = @__userId_0
2025-05-10 08:16:52.091 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType12`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[FriendSuggestionDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:52.092 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendSuggestions (Message_app) in 68.9621ms
2025-05-10 08:16:52.092 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendSuggestions (Message_app)'
2025-05-10 08:16:52.093 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/suggestions/2 - 200 null application/json; charset=utf-8 71.1338ms
2025-05-10 08:16:52.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:52.275 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:52.275 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:52.275 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:52.275 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:52.281 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:52.282 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:52.283 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:52.283 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 7.9175ms
2025-05-10 08:16:52.283 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:52.283 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 8.8094ms
2025-05-10 08:16:56.015 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:56.015 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:56.015 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:56.015 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:56.015 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:56.018 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:56.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:56.020 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:56.020 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 4.995ms
2025-05-10 08:16:56.021 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:56.021 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 6.1075ms
2025-05-10 08:16:56.023 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:16:56.024 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:56.024 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:16:56.025 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:56.025 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:16:56.032 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:56.039 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:16:56.039 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:16:56.040 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 14.8481ms
2025-05-10 08:16:56.040 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:16:56.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 16.5213ms
2025-05-10 08:17:34.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - null null
2025-05-10 08:17:34.780 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:34.781 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:34.781 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:17:34.781 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:17:34.789 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:34.793 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:34.795 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:17:34.795 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 14.0217ms
2025-05-10 08:17:34.795 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:17:34.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/2 - 200 null application/json; charset=utf-8 14.8726ms
2025-05-10 08:17:52.109 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - null null
2025-05-10 08:17:52.109 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.110 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Auth/login - 204 null null 1.0578ms
2025-05-10 08:17:52.112 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5053/api/Auth/login - application/json 65
2025-05-10 08:17:52.112 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.112 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.113 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 08:17:52.113 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-05-10 08:17:52.202 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-05-10 08:17:52.204 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-05-10 08:17:52.205 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 91.5887ms
2025-05-10 08:17:52.205 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-05-10 08:17:52.205 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5053/api/Auth/login - 200 null application/json; charset=utf-8 92.6822ms
2025-05-10 08:17:52.402 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/GetAllFriends/1 - null null
2025-05-10 08:17:52.403 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.403 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.403 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetAllFriends (Message_app)'
2025-05-10 08:17:52.403 +07:00 [INF] Route matched with {action = "GetAllFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllFriends(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:17:52.472 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[username]
    ELSE [u0].[username]
END AS [username], CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[avatar_url]
    ELSE [u0].[avatar_url]
END AS [avatar], CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [u].[id]
    ELSE [u0].[id]
END AS [friendId], @__userId_0 AS [userId]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:52.473 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.DTO.FriendDTO, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:17:52.473 +07:00 [INF] Executed action server.Controllers.FriendsController.GetAllFriends (Message_app) in 70.3778ms
2025-05-10 08:17:52.474 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetAllFriends (Message_app)'
2025-05-10 08:17:52.474 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/GetAllFriends/1 - 200 null application/json; charset=utf-8 71.3281ms
2025-05-10 08:17:52.905 +07:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5053/api/Conversation/get_conversations/1 - null null
2025-05-10 08:17:52.905 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.905 +07:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5053/api/Conversation/get_conversations/1 - 204 null null 0.3992ms
2025-05-10 08:17:52.908 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - null null
2025-05-10 08:17:52.908 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.908 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:52.909 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:17:52.909 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-05-10 08:17:53.000 +07:00 [INF] Executed DbCommand (89ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[name], [c].[is_group], [c].[created_at], [c].[lastMessage], [c].[lastMessageTime], [c].[img_url], [t].[Id], [t].[user_id], [t].[ConversationId], [t].[Name], [t].[IsDeleted], [t].[img_url]
FROM [Conversations] AS [c]
LEFT JOIN (
    SELECT [p0].[id] AS [Id], [p0].[user_id], [p0].[conversation_id] AS [ConversationId], [p0].[name] AS [Name], [p0].[is_deleted] AS [IsDeleted], [p0].[img_url]
    FROM [Participants] AS [p0]
    WHERE [p0].[is_deleted] = CAST(0 AS bit)
) AS [t] ON [c].[id] = [t].[ConversationId]
WHERE EXISTS (
    SELECT 1
    FROM [Participants] AS [p]
    WHERE [c].[id] = [p].[conversation_id] AND [p].[user_id] = @__userId_0)
ORDER BY [c].[id]
2025-05-10 08:17:53.001 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.DTO.ConversationDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:17:53.001 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 92.3754ms
2025-05-10 08:17:53.001 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:17:53.001 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - 200 null application/json; charset=utf-8 93.2565ms
2025-05-10 08:17:53.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - null null
2025-05-10 08:17:53.006 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:53.006 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:53.006 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:17:53.007 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-05-10 08:17:53.011 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[name], [c].[is_group], [c].[created_at], [c].[lastMessage], [c].[lastMessageTime], [c].[img_url], [t].[Id], [t].[user_id], [t].[ConversationId], [t].[Name], [t].[IsDeleted], [t].[img_url]
FROM [Conversations] AS [c]
LEFT JOIN (
    SELECT [p0].[id] AS [Id], [p0].[user_id], [p0].[conversation_id] AS [ConversationId], [p0].[name] AS [Name], [p0].[is_deleted] AS [IsDeleted], [p0].[img_url]
    FROM [Participants] AS [p0]
    WHERE [p0].[is_deleted] = CAST(0 AS bit)
) AS [t] ON [c].[id] = [t].[ConversationId]
WHERE EXISTS (
    SELECT 1
    FROM [Participants] AS [p]
    WHERE [c].[id] = [p].[conversation_id] AND [p].[user_id] = @__userId_0)
ORDER BY [c].[id]
2025-05-10 08:17:53.012 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.DTO.ConversationDto, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-10 08:17:53.012 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 5.0093ms
2025-05-10 08:17:53.012 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-05-10 08:17:53.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Conversation/get_conversations/1 - 200 null application/json; charset=utf-8 6.6135ms
2025-05-10 08:17:54.204 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:17:54.204 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:54.204 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:54.204 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:17:54.204 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:17:54.213 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:54.222 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:54.226 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:17:54.226 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 21.9951ms
2025-05-10 08:17:54.228 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:17:54.228 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 24.4858ms
2025-05-10 08:17:54.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:17:54.243 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:54.243 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:17:54.243 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:17:54.243 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:17:54.263 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:54.267 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:17:54.268 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:17:54.268 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 24.5154ms
2025-05-10 08:17:54.268 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:17:54.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 27.5683ms
2025-05-10 08:18:01.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - null null
2025-05-10 08:18:01.169 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:18:01.170 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:18:01.170 +07:00 [INF] Executing endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:18:01.170 +07:00 [INF] Route matched with {action = "GetUserProfile", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProfile(Int32) on controller server.Controllers.UserProfileController (Message_app).
2025-05-10 08:18:01.257 +07:00 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[id], [t].[avatar_url], [t].[bio], [t].[birthday], [t].[created_at], [t].[email], [t].[gender], [t].[interests], [t].[location], [t].[password], [t].[passwordSalt], [t].[username], [f].[Id], [f].[CreatedAt], [f].[UserId1], [f].[UserId2], [f0].[Id], [f0].[CreatedAt], [f0].[UserId1], [f0].[UserId2]
FROM (
    SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username]
    FROM [Users] AS [u]
    WHERE [u].[id] = @__userId_0
) AS [t]
LEFT JOIN [Friends] AS [f] ON [t].[id] = [f].[UserId1]
LEFT JOIN [Friends] AS [f0] ON [t].[id] = [f0].[UserId2]
ORDER BY [t].[id], [f].[Id]
2025-05-10 08:18:01.258 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType22`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateOnly, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:18:01.259 +07:00 [INF] Executed action server.Controllers.UserProfileController.GetUserProfile (Message_app) in 88.6337ms
2025-05-10 08:18:01.259 +07:00 [INF] Executed endpoint 'server.Controllers.UserProfileController.GetUserProfile (Message_app)'
2025-05-10 08:18:01.259 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/UserProfile/1/profile - 200 null application/json; charset=utf-8 89.4581ms
2025-05-10 08:18:05.082 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:18:05.082 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:18:05.082 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:18:05.082 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:18:05.083 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:18:05.091 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:18:05.120 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:18:05.121 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:18:05.121 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 38.6509ms
2025-05-10 08:18:05.122 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:18:05.122 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 39.6885ms
2025-05-10 08:18:05.128 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - null null
2025-05-10 08:18:05.129 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:18:05.129 +07:00 [INF] CORS policy execution successful.
2025-05-10 08:18:05.129 +07:00 [INF] Executing endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:18:05.129 +07:00 [INF] Route matched with {action = "GetFriends", controller = "Friends"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriendsAsync(Int32) on controller server.Controllers.FriendsController (Message_app).
2025-05-10 08:18:05.157 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[id], [u].[avatar_url], [u].[bio], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[interests], [u].[location], [u].[password], [u].[passwordSalt], [u].[username], [u0].[id], [u0].[avatar_url], [u0].[bio], [u0].[birthday], [u0].[created_at], [u0].[email], [u0].[gender], [u0].[interests], [u0].[location], [u0].[password], [u0].[passwordSalt], [u0].[username]
FROM [Friends] AS [f]
INNER JOIN [Users] AS [u] ON [f].[UserId2] = [u].[id]
INNER JOIN [Users] AS [u0] ON [f].[UserId1] = [u0].[id]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:18:05.164 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN [f].[UserId1] = @__userId_0 THEN [f].[UserId2]
    ELSE [f].[UserId1]
END
FROM [Friends] AS [f]
WHERE [f].[UserId1] = @__userId_0 OR [f].[UserId2] = @__userId_0
2025-05-10 08:18:05.164 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[server.Models.User, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-10 08:18:05.165 +07:00 [INF] Executed action server.Controllers.FriendsController.GetFriendsAsync (Message_app) in 34.9999ms
2025-05-10 08:18:05.165 +07:00 [INF] Executed endpoint 'server.Controllers.FriendsController.GetFriendsAsync (Message_app)'
2025-05-10 08:18:05.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/friends/list/1 - 200 null application/json; charset=utf-8 37.0852ms
2025-05-10 08:18:13.744 +07:00 [INF] Application is shutting down...
