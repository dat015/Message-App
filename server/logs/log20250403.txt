2025-04-03 09:11:15.522 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 09:11:15.637 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 09:11:15.639 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 09:11:15.640 +07:00 [INF] Hosting environment: Development
2025-04-03 09:11:15.640 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 09:11:15.791 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger - null null
2025-04-03 09:11:15.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger - 301 0 null 35.9549ms
2025-04-03 09:11:15.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 09:11:15.902 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 73.2039ms
2025-04-03 09:11:15.907 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.css - null null
2025-04-03 09:11:15.908 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/swagger-ui.css - null null
2025-04-03 09:11:15.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/swagger-ui-bundle.js - null null
2025-04-03 09:11:15.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/swagger-ui-standalone-preset.js - null null
2025-04-03 09:11:15.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 09:11:15.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 09:11:15.913 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 1.7096ms
2025-04-03 09:11:15.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 5.1429ms
2025-04-03 09:11:15.925 +07:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-04-03 09:11:15.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.css - 200 202 text/css 18.6717ms
2025-04-03 09:11:15.935 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-03 09:11:15.940 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/swagger-ui.css - 200 152035 text/css 32.0797ms
2025-04-03 09:11:15.943 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-03 09:11:15.943 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/swagger-ui-standalone-preset.js - 200 230007 text/javascript 33.9519ms
2025-04-03 09:11:15.965 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-03 09:11:15.965 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/swagger-ui-bundle.js - 200 1457477 text/javascript 56.609ms
2025-04-03 09:11:16.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 09:11:16.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.6298ms
2025-04-03 09:33:03.953 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - application/json 57
2025-04-03 09:33:04.100 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 09:33:04.176 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-04-03 09:33:07.177 +07:00 [INF] Executed DbCommand (109ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-03 09:33:07.443 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-04-03 09:33:07.516 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 3336.2014ms
2025-04-03 09:33:07.517 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 09:33:07.538 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - 200 null application/json; charset=utf-8 3588.3825ms
2025-04-03 09:33:07.815 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - application/json null
2025-04-03 09:33:07.825 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 09:33:07.864 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 09:33:08.595 +07:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Participants] AS [p]
INNER JOIN [Conversations] AS [c] ON [p].[conversation_id] = [c].[id]
WHERE [p].[user_id] = @__userId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 09:33:08.618 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Conversation, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 09:33:08.622 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 757.6159ms
2025-04-03 09:33:08.622 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 09:33:08.623 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - 200 null application/json; charset=utf-8 807.4375ms
2025-04-03 09:33:13.352 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 09:33:13.354 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:33:13.365 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:33:13.426 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-03 09:33:13.427 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 61.6317ms
2025-04-03 09:33:13.427 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:33:13.428 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 500 null application/json; charset=utf-8 75.4684ms
2025-04-03 09:33:13.608 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 09:33:13.609 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 09:33:13.614 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 09:33:13.745 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 09:33:13.746 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 09:33:13.747 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 131.8342ms
2025-04-03 09:33:13.747 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 09:33:13.747 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 139.4527ms
2025-04-03 09:33:13.786 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 09:33:13.788 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 09:33:13.794 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 09:33:13.813 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 09:33:13.829 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 09:33:13.848 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 53.678ms
2025-04-03 09:33:13.848 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 09:33:13.848 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 61.9229ms
2025-04-03 09:34:01.339 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - null null
2025-04-03 09:34:01.341 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:34:01.342 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:34:01.351 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-03 09:34:01.352 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 9.3552ms
2025-04-03 09:34:01.352 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:34:01.353 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - 500 null text/plain; charset=utf-8 13.9623ms
2025-04-03 09:47:08.731 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 09:47:08.893 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 09:47:08.895 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 09:47:08.896 +07:00 [INF] Hosting environment: Development
2025-04-03 09:47:08.896 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 09:47:08.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 09:47:09.043 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 91.6775ms
2025-04-03 09:47:09.072 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 09:47:09.074 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 2.1546ms
2025-04-03 09:47:09.076 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 09:47:09.080 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 3.4154ms
2025-04-03 09:47:09.372 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 09:47:09.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.5045ms
2025-04-03 09:47:09.476 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/favicon-32x32.png - null null
2025-04-03 09:47:09.486 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-03 09:47:09.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/favicon-32x32.png - 200 628 image/png 10.2027ms
2025-04-03 09:47:18.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - null null
2025-04-03 09:47:18.353 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:47:18.394 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:47:19.022 +07:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-04-03 09:47:19.028 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 629.2523ms
2025-04-03 09:47:19.029 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:47:19.033 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - 404 null text/plain; charset=utf-8 722.4899ms
2025-04-03 09:47:56.593 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 09:47:56.728 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 09:47:56.730 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 09:47:56.731 +07:00 [INF] Hosting environment: Development
2025-04-03 09:47:56.731 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 09:47:56.772 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 09:47:56.853 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 82.339ms
2025-04-03 09:47:56.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 09:47:56.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 09:47:56.858 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 1.5793ms
2025-04-03 09:47:56.858 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 1.6787ms
2025-04-03 09:47:57.193 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 09:47:57.273 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.3692ms
2025-04-03 09:48:04.893 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - null null
2025-04-03 09:48:04.907 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:48:04.923 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:48:05.116 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-03 09:48:05.119 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 193.3366ms
2025-04-03 09:48:05.119 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:48:05.121 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - 500 null text/plain; charset=utf-8 227.9406ms
2025-04-03 09:48:59.639 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 09:48:59.640 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 1.1178ms
2025-04-03 09:48:59.686 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 09:48:59.686 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 09:48:59.686 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.4478ms
2025-04-03 09:48:59.686 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.5308ms
2025-04-03 09:48:59.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 09:48:59.863 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.2443ms
2025-04-03 09:49:08.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 09:49:08.727 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 1.2334ms
2025-04-03 09:49:08.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 09:49:08.750 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 09:49:08.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.6995ms
2025-04-03 09:49:08.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.2546ms
2025-04-03 09:49:08.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 09:49:08.908 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.5209ms
2025-04-03 09:49:16.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - null null
2025-04-03 09:49:16.475 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:49:16.483 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:49:16.568 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-03 09:49:16.572 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 88.4487ms
2025-04-03 09:49:16.573 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:49:16.573 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - 500 null text/plain; charset=utf-8 99.0421ms
2025-04-03 09:49:22.681 +07:00 [INF] Application is shutting down...
2025-04-03 09:49:31.621 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 09:49:31.725 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 09:49:31.727 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 09:49:31.727 +07:00 [INF] Hosting environment: Development
2025-04-03 09:49:31.727 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 09:49:31.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 09:49:32.004 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 92.6418ms
2025-04-03 09:49:32.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 09:49:32.008 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 09:49:32.009 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 3.4596ms
2025-04-03 09:49:32.011 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 2.4263ms
2025-04-03 09:49:32.088 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 09:49:32.177 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.9393ms
2025-04-03 09:49:39.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - null null
2025-04-03 09:49:39.780 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:49:39.823 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:49:40.311 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 09:49:40.354 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 523.9457ms
2025-04-03 09:49:40.355 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:49:40.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 625.9239ms
2025-04-03 09:49:58.154 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - application/json 57
2025-04-03 09:49:58.157 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 09:49:58.169 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-04-03 09:50:00.574 +07:00 [INF] Executed DbCommand (98ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-03 09:50:00.810 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-04-03 09:50:00.818 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 2644.9515ms
2025-04-03 09:50:00.818 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 09:50:00.829 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - 200 null application/json; charset=utf-8 2674.9211ms
2025-04-03 09:50:00.972 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - application/json null
2025-04-03 09:50:00.973 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 09:50:01.003 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 09:50:01.164 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Participants] AS [p]
INNER JOIN [Conversations] AS [c] ON [p].[conversation_id] = [c].[id]
WHERE [p].[user_id] = @__userId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 09:50:01.188 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Conversation, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 09:50:01.191 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 187.2609ms
2025-04-03 09:50:01.191 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 09:50:01.192 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - 200 null application/json; charset=utf-8 219.9695ms
2025-04-03 09:50:06.004 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 09:50:06.007 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:50:06.007 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:50:06.017 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 09:50:06.020 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 12.6379ms
2025-04-03 09:50:06.023 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 09:50:06.024 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 19.2494ms
2025-04-03 09:50:06.088 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 09:50:06.090 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 09:50:06.096 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 09:50:06.246 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 09:50:06.247 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 09:50:06.247 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 151.4096ms
2025-04-03 09:50:06.248 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 09:50:06.248 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 159.8742ms
2025-04-03 09:50:06.273 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 09:50:06.275 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 09:50:06.280 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 09:50:06.303 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 09:50:06.319 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 09:50:06.336 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 56.3627ms
2025-04-03 09:50:06.336 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 09:50:06.337 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 63.4236ms
2025-04-03 09:51:34.415 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-0187629081 93319
2025-04-03 09:51:34.415 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 09:51:34.423 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 09:51:39.492 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 09:51:39.525 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 5102.096ms
2025-04-03 09:51:39.528 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 09:51:39.540 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 5124.9784ms
2025-04-03 10:10:12.922 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 10:10:12.923 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 10:10:12.924 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 10:10:12.927 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 10:10:12.927 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 3.6685ms
2025-04-03 10:10:12.928 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 10:10:12.928 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 5.5922ms
2025-04-03 10:10:12.996 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 10:10:12.996 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 10:10:12.997 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 10:10:13.100 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 10:10:13.101 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 10:10:13.101 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 104.2998ms
2025-04-03 10:10:13.101 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 10:10:13.101 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 105.4525ms
2025-04-03 10:10:13.161 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 10:10:13.162 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 10:10:13.162 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 10:10:13.173 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 10:10:13.174 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 10:10:13.175 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 12.7028ms
2025-04-03 10:10:13.175 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 10:10:13.175 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 13.8981ms
2025-04-03 10:56:58.084 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 10:56:58.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 5.1255ms
2025-04-03 10:56:58.152 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 10:56:58.153 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.6955ms
2025-04-03 10:56:58.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 10:56:58.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.2657ms
2025-04-03 10:56:58.637 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 10:56:58.646 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.3558ms
2025-04-03 10:57:00.294 +07:00 [INF] Application is shutting down...
2025-04-03 10:58:04.578 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-03 10:58:04.620 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-03 10:58:04.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-03 10:58:04.628 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-03 10:58:04.656 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-03 10:58:04.669 +07:00 [INF] Applying migration '20250403035748_updateAttachment'.
2025-04-03 10:58:04.731 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Attachments] DROP CONSTRAINT [FK_Attachments_Messages_message_id];
2025-04-03 10:58:04.827 +07:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Attachments]') AND [c].[name] = N'message_id');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Attachments] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Attachments] ALTER COLUMN [message_id] int NULL;
2025-04-03 10:58:04.833 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Attachments] ADD CONSTRAINT [FK_Attachments_Messages_message_id] FOREIGN KEY ([message_id]) REFERENCES [Messages] ([id]);
2025-04-03 10:58:04.839 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250403035748_updateAttachment', N'8.0.4');
2025-04-03 11:05:27.176 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-03 11:05:27.219 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-03 11:05:27.226 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-03 11:05:27.228 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-03 11:05:27.255 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-03 11:05:27.267 +07:00 [INF] Applying migration '20250403040521_updateAttachment1'.
2025-04-03 11:05:27.318 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Attachments] ADD [is_temporary] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-04-03 11:05:27.326 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250403040521_updateAttachment1', N'8.0.4');
2025-04-03 14:06:10.739 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 14:06:10.884 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 14:06:10.887 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 14:06:10.887 +07:00 [INF] Hosting environment: Development
2025-04-03 14:06:10.887 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 14:06:11.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:06:11.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 108.7419ms
2025-04-03 14:06:11.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:06:11.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 2.3168ms
2025-04-03 14:06:11.235 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:06:11.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 2.8715ms
2025-04-03 14:06:11.631 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:06:11.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 99.8928ms
2025-04-03 14:09:26.974 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - application/json 57
2025-04-03 14:09:27.030 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:09:27.075 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-04-03 14:09:29.701 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-03 14:09:29.962 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-04-03 14:09:30.038 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 2958.6868ms
2025-04-03 14:09:30.039 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:09:30.050 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - 200 null application/json; charset=utf-8 3075.8621ms
2025-04-03 14:09:30.304 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - application/json null
2025-04-03 14:09:30.308 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:09:30.316 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:09:31.072 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Participants] AS [p]
INNER JOIN [Conversations] AS [c] ON [p].[conversation_id] = [c].[id]
WHERE [p].[user_id] = @__userId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:09:31.100 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Conversation, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:09:31.104 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 787.1995ms
2025-04-03 14:09:31.104 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:09:31.105 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - 200 null application/json; charset=utf-8 800.3587ms
2025-04-03 14:09:42.903 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:09:42.904 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:09:42.913 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:09:42.969 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:09:42.975 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 61.3556ms
2025-04-03 14:09:42.975 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:09:42.977 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 73.7443ms
2025-04-03 14:09:43.033 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:09:43.034 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:09:43.039 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:09:43.141 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:09:43.142 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:09:43.143 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 103.6145ms
2025-04-03 14:09:43.143 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:09:43.143 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 110.5309ms
2025-04-03 14:09:43.167 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:09:43.168 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:09:43.174 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:09:43.190 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:09:43.208 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:09:43.229 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 54.3046ms
2025-04-03 14:09:43.229 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:09:43.230 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 63.0535ms
2025-04-03 14:10:57.982 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-1141061554 93319
2025-04-03 14:10:57.984 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 14:10:57.992 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:11:01.356 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 14:11:01.410 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:11:01.417 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 3425.1405ms
2025-04-03 14:11:01.417 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 14:11:01.421 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 3438.68ms
2025-04-03 14:15:41.417 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:15:41.418 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:15:41.418 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:15:41.425 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:15:41.427 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 8.2781ms
2025-04-03 14:15:41.428 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:15:41.428 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 11.5797ms
2025-04-03 14:15:41.469 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:15:41.470 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:15:41.470 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:15:41.487 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:15:41.487 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:15:41.488 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 17.9337ms
2025-04-03 14:15:41.490 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:15:41.490 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 20.8491ms
2025-04-03 14:15:41.522 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:15:41.522 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:15:41.523 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:15:41.528 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:15:41.529 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:15:41.530 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.9951ms
2025-04-03 14:15:41.530 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:15:41.530 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 8.3624ms
2025-04-03 14:18:07.136 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:18:07.138 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 2.3517ms
2025-04-03 14:18:07.164 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:18:07.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.6017ms
2025-04-03 14:18:07.179 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:18:07.180 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.6868ms
2025-04-03 14:18:07.493 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:18:07.501 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.8851ms
2025-04-03 14:18:11.042 +07:00 [INF] Application is shutting down...
2025-04-03 14:18:21.511 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 14:18:21.593 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 14:18:21.594 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 14:18:21.595 +07:00 [INF] Hosting environment: Development
2025-04-03 14:18:21.595 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 14:18:21.753 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:18:21.838 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 85.1573ms
2025-04-03 14:18:21.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:18:21.842 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:18:21.844 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 3.3412ms
2025-04-03 14:18:21.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 2.5129ms
2025-04-03 14:18:22.008 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:18:22.102 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.7219ms
2025-04-03 14:26:34.892 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - application/json 57
2025-04-03 14:26:34.990 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:26:35.075 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-04-03 14:26:37.574 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-03 14:26:37.805 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-04-03 14:26:37.903 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 2822.0702ms
2025-04-03 14:26:37.905 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:26:37.915 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - 200 null application/json; charset=utf-8 3024.4689ms
2025-04-03 14:26:38.177 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - application/json null
2025-04-03 14:26:38.182 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:26:38.199 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:26:38.607 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Participants] AS [p]
INNER JOIN [Conversations] AS [c] ON [p].[conversation_id] = [c].[id]
WHERE [p].[user_id] = @__userId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:26:38.640 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Conversation, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:26:38.646 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 446.522ms
2025-04-03 14:26:38.646 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:26:38.647 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - 200 null application/json; charset=utf-8 470.5189ms
2025-04-03 14:26:40.193 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:26:40.194 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:26:40.278 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:26:40.278 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:26:40.285 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:26:40.340 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:26:40.346 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 60.3371ms
2025-04-03 14:26:40.346 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:26:40.346 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 68.4619ms
2025-04-03 14:26:40.413 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:26:40.414 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:26:40.415 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:26:40.421 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:26:40.449 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:26:40.450 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:26:40.451 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 30.0359ms
2025-04-03 14:26:40.451 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:26:40.452 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 37.5493ms
2025-04-03 14:26:40.478 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:26:40.479 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:26:40.485 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:26:40.501 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:26:40.515 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:26:40.529 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 44.1679ms
2025-04-03 14:26:40.530 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:26:40.530 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 52.3892ms
2025-04-03 14:27:13.818 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:27:13.820 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:27:13.854 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:27:13.859 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:27:13.860 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:27:13.861 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:27:13.865 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:27:13.867 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 5.8914ms
2025-04-03 14:27:13.867 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:27:13.867 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 7.7988ms
2025-04-03 14:27:13.910 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:27:13.910 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:27:13.910 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:27:13.918 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:27:13.918 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:27:13.919 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 8.4463ms
2025-04-03 14:27:13.919 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:27:13.919 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 9.2741ms
2025-04-03 14:27:13.954 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:27:13.954 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:27:13.954 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:27:13.959 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:27:13.960 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:27:13.960 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 5.2681ms
2025-04-03 14:27:13.960 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:27:13.960 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 6.672ms
2025-04-03 14:28:17.394 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:28:17.396 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 2.1509ms
2025-04-03 14:28:17.447 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:28:17.447 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.6366ms
2025-04-03 14:28:17.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:28:17.448 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.4819ms
2025-04-03 14:28:17.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:28:17.712 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.7209ms
2025-04-03 14:28:34.151 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:28:34.152 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.5423ms
2025-04-03 14:28:34.164 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:28:34.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.4533ms
2025-04-03 14:28:34.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:28:34.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.2083ms
2025-04-03 14:28:34.257 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:28:34.262 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.6377ms
2025-04-03 14:28:35.991 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:28:35.992 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.4517ms
2025-04-03 14:28:36.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:28:36.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:28:36.000 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1726ms
2025-04-03 14:28:36.001 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3594ms
2025-04-03 14:28:36.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:28:36.110 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.3803ms
2025-04-03 14:30:23.163 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:30:23.163 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.4674ms
2025-04-03 14:30:23.186 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:30:23.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1942ms
2025-04-03 14:30:23.186 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:30:23.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3073ms
2025-04-03 14:30:23.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:30:23.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.1ms
2025-04-03 14:30:27.250 +07:00 [INF] Application is shutting down...
2025-04-03 14:30:57.259 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:30:57.260 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:30:57.261 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 257068.5405ms
2025-04-03 14:30:57.261 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 223443.1311ms
2025-04-03 14:31:20.749 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 14:31:20.831 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 14:31:20.833 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 14:31:20.834 +07:00 [INF] Hosting environment: Development
2025-04-03 14:31:20.834 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 14:31:21.079 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:31:21.155 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 77.2843ms
2025-04-03 14:31:21.160 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:31:21.160 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:31:21.162 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 2.6281ms
2025-04-03 14:31:21.162 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 2.664ms
2025-04-03 14:31:21.264 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:31:21.345 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.8445ms
2025-04-03 14:31:24.658 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:31:24.678 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:31:24.708 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:31:24.712 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:31:24.738 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:31:25.108 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:31:25.137 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 388.686ms
2025-04-03 14:31:25.137 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:31:25.140 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 431.7796ms
2025-04-03 14:31:25.174 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:31:25.176 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:31:25.181 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:31:25.768 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:31:25.768 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:31:25.811 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:31:25.812 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 631.0523ms
2025-04-03 14:31:25.813 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:31:25.815 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 640.2399ms
2025-04-03 14:31:25.833 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:31:25.834 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:31:25.837 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:31:25.893 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:31:25.900 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:31:25.907 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 69.9983ms
2025-04-03 14:31:25.907 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:31:25.907 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 74.237ms
2025-04-03 14:31:47.704 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:31:47.705 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:31:47.731 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:31:47.744 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:31:47.745 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:31:47.746 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:31:47.751 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:31:47.752 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 6.1645ms
2025-04-03 14:31:47.752 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:31:47.753 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 8.8067ms
2025-04-03 14:31:47.828 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:31:47.832 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:31:47.835 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:31:47.843 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:31:47.844 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:31:47.844 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 9.7413ms
2025-04-03 14:31:47.845 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:31:47.845 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 17.3668ms
2025-04-03 14:31:47.885 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:31:47.885 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:31:47.885 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:31:47.891 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:31:47.891 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:31:47.892 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.1642ms
2025-04-03 14:31:47.892 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:31:47.892 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 6.9346ms
2025-04-03 14:33:05.779 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:33:05.779 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:33:05.800 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:33:22.175 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:33:22.175 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:33:22.177 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:33:22.177 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:33:22.185 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:33:22.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:37:17.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:37:17.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.7503ms
2025-04-03 14:37:17.594 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:37:17.595 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.4003ms
2025-04-03 14:37:17.602 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:37:17.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.3297ms
2025-04-03 14:37:18.092 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:37:18.096 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.6938ms
2025-04-03 14:40:03.986 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:40:03.986 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:40:03.996 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:40:03.996 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:40:03.998 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:40:03.998 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:40:03.990 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:40:03.990 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:40:03.996 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:40:03.996 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:40:04.016 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:40:04.016 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:40:04.018 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:40:04.019 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:40:04.021 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:40:04.023 +07:00 [ERR] Connection id "0HNBIG63RHPK9", Request id "0HNBIG63RHPK9:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:40:04.023 +07:00 [ERR] Connection id "0HNBIG63RHPKA", Request id "0HNBIG63RHPKA:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:40:04.023 +07:00 [ERR] Connection id "0HNBIG63RHPK8", Request id "0HNBIG63RHPK8:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:40:04.023 +07:00 [ERR] Connection id "0HNBIG63RHPK0", Request id "0HNBIG63RHPK0:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:40:04.023 +07:00 [ERR] Connection id "0HNBIG63RHPK4", Request id "0HNBIG63RHPK4:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:40:04.026 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 401851.6304ms
2025-04-03 14:40:04.029 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 401851.9899ms
2025-04-03 14:40:04.036 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 496331.9234ms
2025-04-03 14:40:04.034 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 519375.1829ms
2025-04-03 14:40:04.032 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 418253.4096ms
2025-04-03 14:41:03.453 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - application/json 57
2025-04-03 14:41:03.454 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:41:03.459 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-04-03 14:41:03.527 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-03 14:41:03.585 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-04-03 14:41:03.590 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 130.9477ms
2025-04-03 14:41:03.590 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:41:03.590 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - 200 null application/json; charset=utf-8 136.8724ms
2025-04-03 14:41:03.858 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - application/json null
2025-04-03 14:41:03.858 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:41:03.861 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:41:03.927 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Participants] AS [p]
INNER JOIN [Conversations] AS [c] ON [p].[conversation_id] = [c].[id]
WHERE [p].[user_id] = @__userId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:41:03.929 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Conversation, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:41:03.930 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 68.6837ms
2025-04-03 14:41:03.930 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:41:03.930 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - 200 null application/json; charset=utf-8 72.0218ms
2025-04-03 14:41:07.443 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:41:07.443 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:41:07.502 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:41:07.522 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:41:07.523 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:41:07.523 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:41:07.528 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:41:07.529 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 6.2434ms
2025-04-03 14:41:07.529 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:41:07.530 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 7.2601ms
2025-04-03 14:41:07.626 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:41:07.627 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:41:07.627 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:41:07.635 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:41:07.635 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:41:07.636 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 8.3637ms
2025-04-03 14:41:07.636 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:41:07.636 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 9.3869ms
2025-04-03 14:41:07.678 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:41:07.679 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:41:07.679 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:41:07.685 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:41:07.686 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:41:07.687 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 7.5537ms
2025-04-03 14:41:07.687 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:41:07.687 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 8.744ms
2025-04-03 14:47:51.857 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:47:51.857 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:47:51.890 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:47:51.906 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:47:51.906 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:47:51.907 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:47:51.909 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:47:51.909 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 2.3452ms
2025-04-03 14:47:51.909 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:47:51.909 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 3.1339ms
2025-04-03 14:47:51.956 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:47:51.957 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:47:51.957 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:47:51.962 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:47:51.963 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:47:51.963 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 6.2214ms
2025-04-03 14:47:51.963 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:47:51.964 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 7.2817ms
2025-04-03 14:47:52.028 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:47:52.029 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:47:52.029 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:47:52.033 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:47:52.033 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:47:52.034 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 4.794ms
2025-04-03 14:47:52.034 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:47:52.034 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 5.5102ms
2025-04-03 14:47:57.952 +07:00 [INF] Handling message: s
2025-04-03 14:47:58.175 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 14:47:58.208 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 14:47:58.257 +07:00 [INF] Processing attachment with ID 
2025-04-03 14:47:58.257 +07:00 [WRN] Attachment with ID  not found!
2025-04-03 14:48:07.946 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:48:07.946 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:48:07.946 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:48:07.947 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 14:48:07.956 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:48:07.954 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 14:48:07.959 +07:00 [ERR] Connection id "0HNBIG63RHPKF", Request id "0HNBIG63RHPKF:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:48:07.959 +07:00 [ERR] Connection id "0HNBIG63RHPKJ", Request id "0HNBIG63RHPKJ:00000001": An unhandled exception was thrown by the application.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
   at System.Net.WebSockets.ManagedWebSocket.ThrowEOFUnexpected()
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 88
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 14:48:07.967 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 420524.2176ms
2025-04-03 14:48:07.972 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 16115.5375ms
2025-04-03 14:49:49.772 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - application/json 57
2025-04-03 14:49:49.778 +07:00 [INF] Executing endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:49:49.780 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(server.DTO.AuthDTO.LoginDTO) on controller Message_app.Controllers.AuthController (Message_app).
2025-04-03 14:49:49.849 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[id], [u].[avatar_url], [u].[birthday], [u].[created_at], [u].[email], [u].[gender], [u].[password], [u].[passwordSalt], [u].[username]
FROM [Users] AS [u]
WHERE [u].[email] = @__email_0
2025-04-03 14:49:49.858 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.DTO.AuthDTO.LoginRespose'.
2025-04-03 14:49:49.859 +07:00 [INF] Executed action Message_app.Controllers.AuthController.Login (Message_app) in 76.1871ms
2025-04-03 14:49:49.859 +07:00 [INF] Executed endpoint 'Message_app.Controllers.AuthController.Login (Message_app)'
2025-04-03 14:49:49.860 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Auth/login - 200 null application/json; charset=utf-8 87.9376ms
2025-04-03 14:49:50.125 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - application/json null
2025-04-03 14:49:50.125 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:49:50.126 +07:00 [INF] Route matched with {action = "GetConversations", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetConversations(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:49:50.152 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Participants] AS [p]
INNER JOIN [Conversations] AS [c] ON [p].[conversation_id] = [c].[id]
WHERE [p].[user_id] = @__userId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:49:50.154 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Conversation, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:49:50.155 +07:00 [INF] Executed action server.Controllers.ConversationController.GetConversations (Message_app) in 28.4556ms
2025-04-03 14:49:50.155 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetConversations (Message_app)'
2025-04-03 14:49:50.155 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_conversations/6 - 200 null application/json; charset=utf-8 30.4176ms
2025-04-03 14:50:22.957 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:50:22.957 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:50:23.020 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:50:23.036 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:50:23.036 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:50:23.036 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:50:23.043 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:50:23.043 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 7.2622ms
2025-04-03 14:50:23.044 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:50:23.044 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 8.4609ms
2025-04-03 14:50:23.136 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:50:23.136 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:50:23.136 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:50:23.149 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:50:23.150 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:50:23.150 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 14.0408ms
2025-04-03 14:50:23.150 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:50:23.152 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 15.9302ms
2025-04-03 14:50:23.200 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:50:23.200 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:50:23.201 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:50:23.206 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:50:23.208 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:50:23.208 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 7.7172ms
2025-04-03 14:50:23.209 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:50:23.209 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 8.6563ms
2025-04-03 14:50:28.388 +07:00 [INF] Handling message: s
2025-04-03 14:50:28.399 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 14:50:28.419 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 14:50:28.424 +07:00 [INF] Processing attachment with ID 
2025-04-03 14:50:28.424 +07:00 [WRN] Attachment with ID  not found!
2025-04-03 14:50:52.502 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:50:52.502 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:50:52.511 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:50:52.527 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:50:52.527 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:50:52.527 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:50:52.530 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:50:52.530 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 2.3136ms
2025-04-03 14:50:52.530 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:50:52.530 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 3.0417ms
2025-04-03 14:50:52.571 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:50:52.571 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:50:52.571 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:50:52.573 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:50:52.574 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:50:52.574 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 3.2008ms
2025-04-03 14:50:52.574 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:50:52.575 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 3.9505ms
2025-04-03 14:50:52.611 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:50:52.612 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:50:52.612 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:50:52.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:50:52.615 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:50:52.615 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 3.0298ms
2025-04-03 14:50:52.615 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:50:52.615 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 3.8915ms
2025-04-03 14:52:24.027 +07:00 [INF] Application is shutting down...
2025-04-03 14:52:54.047 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:52:54.047 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 14:52:54.048 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 121546.1116ms
2025-04-03 14:52:54.048 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 151091.1377ms
2025-04-03 14:57:32.985 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 14:57:33.093 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 14:57:33.095 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 14:57:33.095 +07:00 [INF] Hosting environment: Development
2025-04-03 14:57:33.095 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 14:57:33.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:57:33.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 113.0469ms
2025-04-03 14:57:33.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:57:33.458 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:57:33.458 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 2.9604ms
2025-04-03 14:57:33.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 2.4535ms
2025-04-03 14:57:33.665 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:57:33.763 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.2003ms
2025-04-03 14:57:38.282 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:57:38.284 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:57:38.301 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:57:38.301 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:57:39.489 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:57:39.489 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:57:53.114 +07:00 [INF] Handling message: sa
2025-04-03 14:57:53.488 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 14:57:53.508 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 14:57:53.545 +07:00 [INF] Processing attachment with ID 
2025-04-03 14:57:53.550 +07:00 [WRN] Attachment with ID  not found!
2025-04-03 14:58:15.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:58:15.905 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.5629ms
2025-04-03 14:58:15.939 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:58:15.940 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.9191ms
2025-04-03 14:58:15.940 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:58:15.941 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.5272ms
2025-04-03 14:58:16.388 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:58:16.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.9364ms
2025-04-03 14:58:21.932 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:58:21.933 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:58:21.947 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:58:21.961 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:58:21.963 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:58:21.980 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:58:22.007 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:58:22.021 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 38.6732ms
2025-04-03 14:58:22.022 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:58:22.023 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 61.4528ms
2025-04-03 14:58:22.057 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:58:22.058 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:58:22.062 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:58:22.231 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:58:22.281 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:58:22.286 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 223.9841ms
2025-04-03 14:58:22.286 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:58:22.293 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 236.0405ms
2025-04-03 14:58:22.346 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:58:22.347 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:58:22.349 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:58:22.359 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:58:22.364 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:58:22.371 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 21.9131ms
2025-04-03 14:58:22.372 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:58:22.372 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 25.5645ms
2025-04-03 14:58:29.680 +07:00 [INF] Handling message: as
2025-04-03 14:58:29.691 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 14:58:29.699 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 14:58:29.702 +07:00 [INF] Message saved to Redis: {"id":83,"content":"as","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T07:58:29.6889211Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 14:58:40.701 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:58:40.702 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:58:40.731 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:58:40.734 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:58:40.736 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:58:40.736 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:58:40.740 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:58:40.741 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 4.6101ms
2025-04-03 14:58:40.741 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:58:40.742 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 7.1851ms
2025-04-03 14:58:40.793 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:58:40.794 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:58:40.794 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:58:40.816 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:58:40.817 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:58:40.817 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 22.8305ms
2025-04-03 14:58:40.817 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:58:40.818 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 24.4241ms
2025-04-03 14:58:40.869 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:58:40.870 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:58:40.870 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:58:40.890 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:58:40.890 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:58:40.891 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 20.7281ms
2025-04-03 14:58:40.891 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:58:40.891 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 22.2544ms
2025-04-03 14:59:26.212 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 14:59:26.213 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.6313ms
2025-04-03 14:59:26.233 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 14:59:26.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.7132ms
2025-04-03 14:59:26.235 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 14:59:26.235 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1647ms
2025-04-03 14:59:26.444 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 14:59:26.448 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.308ms
2025-04-03 14:59:29.917 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 14:59:29.918 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 14:59:29.932 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 14:59:29.954 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 14:59:29.955 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:59:29.960 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 14:59:29.963 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 14:59:29.966 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 6.0372ms
2025-04-03 14:59:29.966 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 14:59:29.967 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 12.4182ms
2025-04-03 14:59:30.076 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 14:59:30.080 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:59:30.085 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 14:59:30.093 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 14:59:30.094 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 14:59:30.095 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 9.602ms
2025-04-03 14:59:30.095 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 14:59:30.096 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 19.2863ms
2025-04-03 14:59:30.134 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 14:59:30.134 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:59:30.137 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 14:59:30.141 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 14:59:30.142 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 14:59:30.143 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.6319ms
2025-04-03 14:59:30.144 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 14:59:30.144 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 10.1462ms
2025-04-03 14:59:36.091 +07:00 [INF] Handling message: asdasd
2025-04-03 14:59:36.103 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 14:59:36.112 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 14:59:36.112 +07:00 [INF] Message saved to DB: 84
2025-04-03 14:59:36.114 +07:00 [INF] Message saved to Redis: {"id":84,"content":"asdasd","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T07:59:36.1021994Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:03:49.921 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:03:49.922 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:03:49.940 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:03:49.957 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:03:49.958 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:03:49.958 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:03:49.960 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:03:49.961 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 3.082ms
2025-04-03 15:03:49.961 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:03:49.961 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 4.5192ms
2025-04-03 15:03:50.004 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:03:50.004 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:03:50.004 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:03:50.008 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:03:50.009 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:03:50.009 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 4.3189ms
2025-04-03 15:03:50.009 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:03:50.009 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 5.5539ms
2025-04-03 15:03:50.041 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:03:50.041 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:03:50.041 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:03:50.046 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:03:50.046 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:03:50.046 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 4.6555ms
2025-04-03 15:03:50.046 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:03:50.046 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 5.1507ms
2025-04-03 15:04:02.507 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-2434228077 93319
2025-04-03 15:04:02.508 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:04:02.514 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:04:07.153 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 15:04:07.156 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:04:07.158 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 4643.891ms
2025-04-03 15:04:07.158 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:04:07.159 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 4651.8171ms
2025-04-03 15:04:07.195 +07:00 [INF] Handling message: FILE
2025-04-03 15:04:07.197 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:04:07.203 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:04:07.204 +07:00 [INF] Message saved to DB: 85
2025-04-03 15:04:07.204 +07:00 [INF] Message saved to Redis: {"id":85,"content":"FILE","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T08:04:07.1970119Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:04:19.770 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:04:19.770 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:04:19.790 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:04:19.812 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:04:19.812 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:04:19.813 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:04:19.815 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:04:19.815 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 2.465ms
2025-04-03 15:04:19.815 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:04:19.815 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 3.6609ms
2025-04-03 15:04:19.869 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:04:19.869 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:04:19.869 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:04:19.873 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:04:19.873 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:04:19.874 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 4.269ms
2025-04-03 15:04:19.874 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:04:19.874 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 4.8929ms
2025-04-03 15:04:19.918 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:04:19.918 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:04:19.918 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:04:19.922 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:04:19.923 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:04:19.923 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 4.3763ms
2025-04-03 15:04:19.923 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:04:19.923 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 4.8902ms
2025-04-03 15:05:57.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:05:57.592 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.3329ms
2025-04-03 15:05:57.613 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:05:57.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3288ms
2025-04-03 15:05:57.614 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:05:57.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1754ms
2025-04-03 15:05:58.042 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:05:58.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 3.1659ms
2025-04-03 15:06:12.549 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:06:12.549 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.5216ms
2025-04-03 15:06:12.582 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:06:12.583 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.4097ms
2025-04-03 15:06:12.583 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:06:12.583 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1443ms
2025-04-03 15:06:12.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:06:12.955 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.165ms
2025-04-03 15:06:16.144 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:06:16.144 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.2867ms
2025-04-03 15:06:16.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:06:16.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3051ms
2025-04-03 15:06:16.170 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:06:16.170 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1371ms
2025-04-03 15:06:16.416 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:06:16.418 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.2066ms
2025-04-03 15:06:18.671 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:06:18.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.3454ms
2025-04-03 15:06:18.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:06:18.694 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.2846ms
2025-04-03 15:06:18.704 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:06:18.704 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1372ms
2025-04-03 15:06:18.934 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:06:18.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.5741ms
2025-04-03 15:06:34.287 +07:00 [INF] Application is shutting down...
2025-04-03 15:07:04.305 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.305 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.305 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 454387.8623ms
2025-04-03 15:07:04.306 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.307 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.309 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.309 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 566026.9612ms
2025-04-03 15:07:04.310 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.311 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:07:04.313 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 566028.1109ms
2025-04-03 15:07:04.311 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout.
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client)
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 15:07:04.306 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout.
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client)
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 15:07:04.309 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout.
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client)
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 15:07:04.325 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 15:07:04.306 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout.
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client)
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 15:07:04.324 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 15:07:04.324 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 15:07:04.326 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 164556.0338ms
2025-04-03 15:07:04.326 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 503624.831ms
2025-04-03 15:07:04.325 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 522392.9281ms
2025-04-03 15:07:04.325 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 15:07:04.326 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 194404.6575ms
2025-04-03 15:07:30.056 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 15:07:30.134 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 15:07:30.136 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 15:07:30.136 +07:00 [INF] Hosting environment: Development
2025-04-03 15:07:30.136 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 15:07:30.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:07:30.368 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 93.8121ms
2025-04-03 15:07:30.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:07:30.373 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:07:30.374 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 2.0662ms
2025-04-03 15:07:30.376 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 3.5453ms
2025-04-03 15:07:30.454 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:07:30.529 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.493ms
2025-04-03 15:07:33.307 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:07:33.321 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:07:33.346 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:07:33.348 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:07:33.374 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:07:33.562 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:07:33.578 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 201.3723ms
2025-04-03 15:07:33.579 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:07:33.582 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 235.8522ms
2025-04-03 15:07:33.630 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:07:33.632 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:07:33.637 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:07:34.239 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:07:34.239 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:07:34.285 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:07:34.286 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 648.6464ms
2025-04-03 15:07:34.286 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:07:34.288 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 657.9049ms
2025-04-03 15:07:34.304 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:07:34.305 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:07:34.307 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:07:34.360 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:07:34.369 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:07:34.376 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 68.4727ms
2025-04-03 15:07:34.376 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:07:34.377 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 72.3668ms
2025-04-03 15:07:55.093 +07:00 [INF] Handling message: cc
2025-04-03 15:07:55.197 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:07:55.207 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:07:55.225 +07:00 [INF] Message saved to DB: 86
2025-04-03 15:07:55.227 +07:00 [INF] Message saved to Redis: {"id":86,"content":"cc","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T08:07:55.1110063Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:09:28.954 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.954 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.965 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.965 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.967 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.968 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.972 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.972 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.973 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.973 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.980 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.980 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.982 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:09:28.982 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:09:28.995 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:09:28.996 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:09:28.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:09:29.005 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:09:29.009 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:09:29.009 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:09:29.015 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:10:49.300 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:10:49.300 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.4739ms
2025-04-03 15:10:49.339 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:10:49.340 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 1.0486ms
2025-04-03 15:10:49.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:10:49.342 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.5627ms
2025-04-03 15:10:49.628 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:10:49.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 5.1145ms
2025-04-03 15:11:14.945 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:11:14.946 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.8915ms
2025-04-03 15:11:14.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:11:14.970 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3715ms
2025-04-03 15:11:14.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:11:14.970 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1721ms
2025-04-03 15:11:15.275 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:11:15.278 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.8858ms
2025-04-03 15:11:20.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:11:20.172 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.5173ms
2025-04-03 15:11:20.186 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:11:20.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3317ms
2025-04-03 15:11:20.187 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:11:20.188 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.2757ms
2025-04-03 15:11:20.406 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:11:20.408 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.6802ms
2025-04-03 15:11:24.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:11:24.501 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.6142ms
2025-04-03 15:11:24.518 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:11:24.518 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.418ms
2025-04-03 15:11:24.519 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:11:24.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1673ms
2025-04-03 15:11:24.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:11:24.724 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.9125ms
2025-04-03 15:11:27.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:11:27.525 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.4804ms
2025-04-03 15:11:27.556 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:11:27.556 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3829ms
2025-04-03 15:11:27.557 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:11:27.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1675ms
2025-04-03 15:11:27.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:11:27.809 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.1959ms
2025-04-03 15:11:30.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:11:30.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 0.3636ms
2025-04-03 15:11:30.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:11:30.764 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 0.3733ms
2025-04-03 15:11:30.765 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:11:30.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 0.1258ms
2025-04-03 15:11:30.996 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:11:30.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2.2511ms
2025-04-03 15:11:41.052 +07:00 [INF] Application is shutting down...
2025-04-03 15:12:11.062 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.062 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.063 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162097.8423ms
2025-04-03 15:12:11.063 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162109.0236ms
2025-04-03 15:12:11.063 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.063 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.063 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162096.4306ms
2025-04-03 15:12:11.063 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162091.6571ms
2025-04-03 15:12:11.064 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.064 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.064 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.064 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162091.4614ms
2025-04-03 15:12:11.064 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162084.3529ms
2025-04-03 15:12:11.064 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:12:11.065 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 277758.1553ms
2025-04-03 15:12:11.065 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Connections.ConnectionAbortedException: The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout.
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at server.Services.WebSocketService.webSocket.Receiver(Client client)
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 15:12:11.079 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 15:12:11.079 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 162097.0215ms
2025-04-03 15:12:29.331 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 15:12:29.414 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 15:12:29.416 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 15:12:29.416 +07:00 [INF] Hosting environment: Development
2025-04-03 15:12:29.416 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 15:12:29.551 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:12:29.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:12:29.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 86.8411ms
2025-04-03 15:12:29.644 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 3.745ms
2025-04-03 15:12:29.645 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:12:29.647 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 2.5983ms
2025-04-03 15:12:29.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:12:29.836 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.5755ms
2025-04-03 15:12:51.386 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:12:51.414 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:12:51.501 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:12:51.501 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:12:51.574 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:12:51.935 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:12:51.972 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 393.8117ms
2025-04-03 15:12:51.972 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:12:51.975 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 561.2227ms
2025-04-03 15:12:51.995 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:12:52.000 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:12:52.007 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:12:53.560 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:12:53.560 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:12:53.671 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:12:53.676 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 1668.7583ms
2025-04-03 15:12:53.676 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:12:53.683 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 1687.1449ms
2025-04-03 15:12:53.704 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:12:53.706 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:12:53.716 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:12:53.830 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:12:53.854 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:12:53.878 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 161.3031ms
2025-04-03 15:12:53.878 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:12:53.880 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 176.248ms
2025-04-03 15:13:30.624 +07:00 [INF] Handling message: as
2025-04-03 15:13:30.875 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:13:30.893 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:13:30.941 +07:00 [INF] Message saved to DB: 87
2025-04-03 15:13:30.945 +07:00 [INF] Message saved to Redis: {"id":87,"content":"as","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T08:13:30.6556031Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:14:36.182 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.182 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.183 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.183 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.201 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.201 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.202 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.203 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.204 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.204 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.213 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.214 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.217 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.219 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.220 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:14:36.222 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:14:36.231 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.231 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.236 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.238 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.239 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:14:36.244 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:15:16.502 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:15:16.502 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:15:16.516 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:15:16.535 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:15:16.536 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:15:16.536 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:15:16.545 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:15:16.547 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 10.4723ms
2025-04-03 15:15:16.548 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:15:16.548 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 13.6281ms
2025-04-03 15:15:16.592 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:15:16.593 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:15:16.594 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:15:16.602 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:15:16.603 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:15:16.603 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 8.8285ms
2025-04-03 15:15:16.604 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:15:16.604 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 11.8329ms
2025-04-03 15:15:16.659 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:15:16.659 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:15:16.660 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:15:16.665 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:15:16.666 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:15:16.667 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.9432ms
2025-04-03 15:15:16.667 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:15:16.667 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 8.1039ms
2025-04-03 15:24:54.646 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:24:54.647 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:24:54.674 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:24:54.675 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:24:54.676 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:24:54.680 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:24:54.688 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:24:54.693 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 12.2162ms
2025-04-03 15:24:54.693 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:24:54.693 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 18.555ms
2025-04-03 15:24:54.737 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:24:54.739 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:24:54.741 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:24:54.747 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:24:54.747 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:24:54.748 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 6.7239ms
2025-04-03 15:24:54.748 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:24:54.748 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 10.8608ms
2025-04-03 15:24:54.782 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:24:54.782 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:24:54.785 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:24:54.790 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:24:54.790 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:24:54.792 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.9021ms
2025-04-03 15:24:54.793 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:24:54.793 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 11.0138ms
2025-04-03 15:25:04.156 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-2795803832 93319
2025-04-03 15:25:04.157 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:25:04.162 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:25:06.432 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 15:25:06.436 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:25:06.438 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 2275.8684ms
2025-04-03 15:25:06.438 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:25:06.440 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 2283.3905ms
2025-04-03 15:25:06.456 +07:00 [INF] Handling message: FILE
2025-04-03 15:25:06.460 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:25:06.468 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:25:06.469 +07:00 [INF] Message saved to DB: 88
2025-04-03 15:25:06.476 +07:00 [INF] Transaction committed for message: 88
2025-04-03 15:25:06.477 +07:00 [INF] Message saved to Redis: {"id":88,"content":"FILE","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T08:25:06.4590392Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:28:32.627 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-1197495250 93319
2025-04-03 15:28:32.628 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:28:32.628 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:28:35.031 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 15:28:35.032 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:28:35.033 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 2404.3018ms
2025-04-03 15:28:35.033 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:28:35.035 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 2407.718ms
2025-04-03 15:28:35.045 +07:00 [INF] Handling message: FILE
2025-04-03 15:28:35.068 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:28:35.076 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:28:35.077 +07:00 [INF] Message saved to DB: 89
2025-04-03 15:28:35.079 +07:00 [INF] Transaction committed for message: 89
2025-04-03 15:28:35.080 +07:00 [INF] Message saved to Redis: {"id":89,"content":"FILE","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T08:28:35.0675646Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:32:30.611 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:32:30.611 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:32:30.650 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:32:30.668 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:32:30.668 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:32:30.668 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:32:30.670 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:32:30.670 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 1.7904ms
2025-04-03 15:32:30.670 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:32:30.670 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 2.5782ms
2025-04-03 15:32:30.746 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:32:30.747 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:32:30.747 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:32:30.754 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:32:30.754 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:32:30.754 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 7.2292ms
2025-04-03 15:32:30.755 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:32:30.755 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 8.9551ms
2025-04-03 15:32:30.810 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:32:30.810 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:32:30.810 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:32:30.816 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:32:30.816 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:32:30.817 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.2229ms
2025-04-03 15:32:30.817 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:32:30.817 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 6.796ms
2025-04-03 15:32:38.399 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-1706234573 93319
2025-04-03 15:32:38.400 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:32:38.400 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:32:49.559 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:32:49.560 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 11159.297ms
2025-04-03 15:32:49.560 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:32:49.560 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 400 null application/json; charset=utf-8 11161.079ms
2025-04-03 15:32:49.589 +07:00 [INF] Handling message: FILE
2025-04-03 15:32:49.591 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:32:49.606 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:32:49.607 +07:00 [INF] Message saved to DB: 90
2025-04-03 15:32:49.608 +07:00 [INF] Transaction committed for message: 90
2025-04-03 15:32:49.608 +07:00 [INF] Message saved to Redis: {"id":90,"content":"FILE","sender_id":6,"is_read":false,"type":"message","isFile":false,"created_at":"2025-04-03T08:32:49.5910054Z","conversation_id":1,"sender":null,"conversation":null,"Attachments":[]}
2025-04-03 15:38:18.772 +07:00 [INF] Application is shutting down...
2025-04-03 15:38:48.793 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.793 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.793 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.794 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.794 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.794 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.794 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 834148.6054ms
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452612.7875ms
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1557409.5233ms
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452612.7875ms
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 378184.5723ms
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452594.5256ms
2025-04-03 15:38:48.795 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1412293.4186ms
2025-04-03 15:38:48.796 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.796 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.796 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.796 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.796 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452591.7067ms
2025-04-03 15:38:48.796 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452578.5307ms
2025-04-03 15:38:48.796 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452575.9248ms
2025-04-03 15:38:48.796 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452593.7943ms
2025-04-03 15:38:48.796 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:38:48.796 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 1452583.0955ms
2025-04-03 15:39:48.068 +07:00 [INF] User profile is available. Using 'C:\Users\Thao\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-03 15:39:48.243 +07:00 [INF] Now listening on: http://localhost:5053
2025-04-03 15:39:48.245 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-03 15:39:48.245 +07:00 [INF] Hosting environment: Development
2025-04-03 15:39:48.245 +07:00 [INF] Content root path: C:\Users\Thao\source\Flutter\Message_app\server
2025-04-03 15:39:48.415 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.html - null null
2025-04-03 15:39:48.597 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.html - 200 null text/html;charset=utf-8 182.5253ms
2025-04-03 15:39:48.605 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/index.js - null null
2025-04-03 15:39:48.609 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/index.js - 200 null application/javascript;charset=utf-8 3.7074ms
2025-04-03 15:39:48.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - null null
2025-04-03 15:39:48.625 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 3.4708ms
2025-04-03 15:39:48.701 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - null null
2025-04-03 15:39:48.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5053/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.3589ms
2025-04-03 15:39:55.381 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-0997194498 93319
2025-04-03 15:39:55.403 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:39:55.429 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:39:58.800 +07:00 [INF] Executed DbCommand (89ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 15:39:58.834 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:39:58.860 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 3426.2536ms
2025-04-03 15:39:58.861 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:39:58.864 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 3482.8328ms
2025-04-03 15:41:13.200 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.202 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.236 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.237 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.238 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.239 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.285 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.285 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.288 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.288 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.290 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.290 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.301 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.302 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.302 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.303 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.305 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.305 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.306 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.306 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.309 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.310 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:41:13.311 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.311 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:41:13.787 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.791 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.800 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.800 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.802 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.807 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.816 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.816 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.842 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.847 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:41:13.850 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:50:49.155 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:50:49.156 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:50:49.204 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:50:49.212 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:50:49.216 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:50:49.223 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:50:49.254 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:50:49.275 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 52.3265ms
2025-04-03 15:50:49.276 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:50:49.276 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 64.1026ms
2025-04-03 15:50:49.338 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:50:49.339 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:50:49.344 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:50:49.489 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:50:49.555 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:50:49.558 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 213.9303ms
2025-04-03 15:50:49.558 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:50:49.563 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 224.7578ms
2025-04-03 15:50:49.609 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:50:49.610 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:50:49.614 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:50:49.630 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:50:49.642 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:50:49.651 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 36.1154ms
2025-04-03 15:50:49.651 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:50:49.651 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 42.2007ms
2025-04-03 15:50:58.186 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-1272894365 93319
2025-04-03 15:50:58.187 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:50:58.187 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:51:01.503 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 15:51:01.504 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:51:01.514 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 3325.9417ms
2025-04-03 15:51:01.514 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:51:01.518 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 3331.6414ms
2025-04-03 15:51:01.541 +07:00 [INF] Handling message: FILE
2025-04-03 15:51:01.614 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:51:01.623 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:51:01.632 +07:00 [INF] Message saved to DB: 91
2025-04-03 15:51:01.633 +07:00 [INF] Processing attachment with ID 0
2025-04-03 15:51:01.661 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[id], [a].[FileSize], [a].[file_type], [a].[file_url], [a].[is_temporary], [a].[message_id], [a].[uploaded_at]
FROM [Attachments] AS [a]
WHERE [a].[id] = @__p_0
2025-04-03 15:51:01.662 +07:00 [WRN] Attachment with ID 0 not found!
2025-04-03 15:52:21.882 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:52:21.882 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:52:21.913 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:52:21.944 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:52:21.944 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:52:21.945 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:52:21.949 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:52:21.949 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 4.1365ms
2025-04-03 15:52:21.950 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:52:21.950 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 6.1904ms
2025-04-03 15:52:22.023 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:52:22.024 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:52:22.025 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:52:22.031 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:52:22.032 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:52:22.033 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 7.9918ms
2025-04-03 15:52:22.033 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:52:22.034 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 10.3169ms
2025-04-03 15:52:22.090 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:52:22.090 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:52:22.090 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:52:22.095 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:52:22.097 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:52:22.097 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.9879ms
2025-04-03 15:52:22.097 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:52:22.098 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 7.9445ms
2025-04-03 15:52:27.442 +07:00 [INF] Request starting HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - multipart/form-data; boundary=--dio-boundary-3883193027 93319
2025-04-03 15:52:27.443 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:52:27.443 +07:00 [INF] Route matched with {action = "UploadFile", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadFile(Microsoft.AspNetCore.Http.IFormFile) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:52:30.321 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([FileSize], [file_type], [file_url], [is_temporary], [message_id], [uploaded_at])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-03 15:52:30.321 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:52:30.322 +07:00 [INF] Executed action server.Controllers.MessageController.UploadFile (Message_app) in 2878.7592ms
2025-04-03 15:52:30.323 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.UploadFile (Message_app)'
2025-04-03 15:52:30.326 +07:00 [INF] Request finished HTTP/1.1 POST http://10.0.2.2:5053/api/Message/uploadFile - 200 null application/json; charset=utf-8 2883.144ms
2025-04-03 15:52:30.345 +07:00 [INF] Handling message: FILE
2025-04-03 15:52:30.352 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:52:30.358 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([content], [conversation_id], [created_at], [isFile], [is_read], [sender_id], [type])
OUTPUT INSERTED.[id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-03 15:52:30.359 +07:00 [INF] Message saved to DB: 92
2025-04-03 15:52:30.359 +07:00 [INF] Processing attachment with ID 7
2025-04-03 15:52:30.365 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[id], [a].[FileSize], [a].[file_type], [a].[file_url], [a].[is_temporary], [a].[message_id], [a].[uploaded_at]
FROM [Attachments] AS [a]
WHERE [a].[id] = @__p_0
2025-04-03 15:52:30.395 +07:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-04-03 15:52:30.412 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (DbType = Single), @p1='?' (Size = 50), @p2='?' (Size = 255), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p14='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = Int32), @p13='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Attachments] SET [FileSize] = @p0, [file_type] = @p1, [file_url] = @p2, [is_temporary] = @p3, [message_id] = @p4, [uploaded_at] = @p5
OUTPUT 1
WHERE [id] = @p6;
UPDATE [Messages] SET [content] = @p7, [conversation_id] = @p8, [created_at] = @p9, [isFile] = @p10, [is_read] = @p11, [sender_id] = @p12, [type] = @p13
OUTPUT 1
WHERE [id] = @p14;
2025-04-03 15:52:30.414 +07:00 [INF] Attachment updated: False
2025-04-03 15:52:30.415 +07:00 [INF] Message updated: True
2025-04-03 15:52:30.424 +07:00 [INF] Transaction committed for message: 92
2025-04-03 15:52:30.442 +07:00 [ERR] An error occurred using a transaction.
2025-04-03 15:52:30.443 +07:00 [INF] Executed endpoint '/ws'
2025-04-03 15:52:30.443 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: This SqlTransaction has completed; it is no longer usable.
   at Microsoft.Data.SqlClient.SqlTransaction.ZombieCheck()
   at Microsoft.Data.SqlClient.SqlTransaction.Rollback()
   at System.Data.Common.DbTransaction.RollbackAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at server.Services.WebSocketService.webSocket.HandleMessage(Client client, MessageDTO message) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 306
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 112
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-03 15:52:30.476 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-04-03 15:52:30.479 +07:00 [ERR] Connection id "0HNBIHCBUCJE0", Request id "0HNBIHCBUCJE0:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: This SqlTransaction has completed; it is no longer usable.
   at Microsoft.Data.SqlClient.SqlTransaction.ZombieCheck()
   at Microsoft.Data.SqlClient.SqlTransaction.Rollback()
   at System.Data.Common.DbTransaction.RollbackAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at server.Services.WebSocketService.webSocket.HandleMessage(Client client, MessageDTO message) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 306
   at server.Services.WebSocketService.webSocket.Receiver(Client client) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 112
   at server.Services.WebSocketService.webSocket.HandleWebSocket(HttpContext context) in C:\Users\Thao\source\Flutter\Message_app\server\Services\WebSocketService\websocket.cs:line 71
   at Program.<>c.<<<Main>$>b__0_3>d.MoveNext() in C:\Users\Thao\source\Flutter\Message_app\server\Program.cs:line 75
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-04-03 15:52:30.482 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/ws - 101 null null 8599.8576ms
2025-04-03 15:52:35.511 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:52:35.512 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:52:35.526 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:54:54.875 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:54:54.875 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:54:54.898 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:54:54.899 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:54:54.899 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:54:54.900 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:54:54.904 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:54:54.905 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 6.1968ms
2025-04-03 15:54:54.905 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:54:54.906 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 7.6401ms
2025-04-03 15:54:54.970 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:54:54.971 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:54:54.971 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:54:54.979 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:54:54.980 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:54:54.980 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 9.5427ms
2025-04-03 15:54:54.980 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:54:54.981 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 10.501ms
2025-04-03 15:54:55.027 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:54:55.027 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:54:55.027 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:54:55.033 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:54:55.033 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:54:55.034 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 6.6035ms
2025-04-03 15:54:55.034 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:54:55.034 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 7.3551ms
2025-04-03 15:58:00.000 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/ws - null null
2025-04-03 15:58:00.001 +07:00 [INF] Executing endpoint '/ws'
2025-04-03 15:58:00.026 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__client_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[conversation_id]
FROM [Participants] AS [p]
WHERE [p].[user_id] = @__client_UserId_0 AND [p].[is_deleted] = CAST(0 AS bit)
2025-04-03 15:58:00.047 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - application/json null
2025-04-03 15:58:00.047 +07:00 [INF] Executing endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:58:00.047 +07:00 [INF] Route matched with {action = "GetMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessages(Int32) on controller server.Controllers.MessageController (Message_app).
2025-04-03 15:58:00.050 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[server.Models.Message, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-03 15:58:00.050 +07:00 [INF] Executed action server.Controllers.MessageController.GetMessages (Message_app) in 3.186ms
2025-04-03 15:58:00.050 +07:00 [INF] Executed endpoint 'server.Controllers.MessageController.GetMessages (Message_app)'
2025-04-03 15:58:00.051 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Message/getMessages/1 - 200 null application/json; charset=utf-8 4.0433ms
2025-04-03 15:58:00.112 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - application/json null
2025-04-03 15:58:00.112 +07:00 [INF] Executing endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:58:00.112 +07:00 [INF] Route matched with {action = "GetFirstConversation", controller = "Conversation"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFirstConversation(Int32) on controller server.Controllers.ConversationController (Message_app).
2025-04-03 15:58:00.118 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[created_at], [c].[is_group], [c].[name]
FROM [Conversations] AS [c]
WHERE [c].[id] = @__p_0
2025-04-03 15:58:00.118 +07:00 [INF] Executing OkObjectResult, writing value of type 'server.Models.Conversation'.
2025-04-03 15:58:00.119 +07:00 [INF] Executed action server.Controllers.ConversationController.GetFirstConversation (Message_app) in 6.5319ms
2025-04-03 15:58:00.119 +07:00 [INF] Executed endpoint 'server.Controllers.ConversationController.GetFirstConversation (Message_app)'
2025-04-03 15:58:00.119 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Conversation/get_first_conversation/1 - 200 null application/json; charset=utf-8 7.4369ms
2025-04-03 15:58:00.163 +07:00 [INF] Request starting HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - application/json null
2025-04-03 15:58:00.163 +07:00 [INF] Executing endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:58:00.163 +07:00 [INF] Route matched with {action = "GetParticipants", controller = "Participant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticipants(Int32) on controller server.Controllers.ParticipantController (Message_app).
2025-04-03 15:58:00.167 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__conversation_id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[id], [p].[conversation_id], [p].[is_deleted], [p].[joined_at], [p].[user_id]
FROM [Participants] AS [p]
WHERE [p].[conversation_id] = @__conversation_id_0
2025-04-03 15:58:00.168 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Collections.Generic.List`1[[server.Models.Participants, Message_app, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-03 15:58:00.168 +07:00 [INF] Executed action server.Controllers.ParticipantController.GetParticipants (Message_app) in 5.2894ms
2025-04-03 15:58:00.169 +07:00 [INF] Executed endpoint 'server.Controllers.ParticipantController.GetParticipants (Message_app)'
2025-04-03 15:58:00.169 +07:00 [INF] Request finished HTTP/1.1 GET http://10.0.2.2:5053/api/Participant/get_participants/1 - 200 null application/json; charset=utf-8 6.4389ms
